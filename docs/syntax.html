<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="application/xhtml+xml; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 10.2.1" />
<title>POCA</title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

.monospaced, code, pre {
  font-family: "Courier New", Courier, monospace;
  font-size: inherit;
  color: navy;
  padding: 0;
  margin: 0;
}
pre {
  white-space: pre-wrap;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #888;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; vertical-align: text-bottom; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel0, div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }

div.unbreakable { page-break-inside: avoid; }


/*
 * xhtml11 specific
 *
 * */

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overridden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<h1>POCA</h1>
<span id="author">:!webfonts:</span><br />
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph"><p></p></div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph"><p>POCA is JavaScript/ECMAScript-like, but it&#8217;s not the same. It has some
differences and even a few features that ECMAScript doesn&#8217;t have.</p></div>
<div class="paragraph"><p>This document shows the features of POCA. POCA is a very powerful scripting
language, that uses some of the concepts coming from ECMAScript, Lua, Squirrel,
Nasal, Python, and Perl. POCA supports object-oriented programming (OOP) in two
flavours (prototype-based and class-based), as well as functional programming
and procedural programming styles.</p></div>
<div class="paragraph"><p>In POCA everything is an expression; there are no statements, so for example
something like</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> scope <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> b <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>let c <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> c <span style="color: #990000">&lt;</span> <span style="color: #993399">16</span><span style="color: #990000">;</span> c<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
    b <span style="color: #990000">+=</span> c <span style="color: #990000">+</span> c
  <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
  b<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>and</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>b <span style="color: #990000">&lt;</span> <span style="color: #993399">1</span><span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
          <span style="color: #993399">1</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span> <span style="color: #990000">(</span>b <span style="color: #990000">&lt;</span> <span style="color: #993399">4</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
          <span style="color: #993399">2</span>
        <span style="color: #FF0000">}</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">{</span>
          <span style="color: #993399">3</span>
        <span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>is valid POCA code.</p></div>
<div class="paragraph"><p>People familiar with other programming languages, especially scripting
languages such as JavaScript/ECMAScript in particular, are usually able to
learn POCA fairly quickly.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph"><p>POCA uses a frame stack, infinite register, bytecode instruction set
architecture (ISA).</p></div>
<div class="paragraph"><p>Unlike almost all other script interpreters, POCA is thread-safe and scalable
when called from multiple CPU threads. No special handling is required and the
threads can be scheduled concurrently. There is no global lock (GIL) on the g
interpreter or the x86 just in time (JIT) compiler execution engine. The only
limit to scalability is the single-threaded incremental and generational
garbage collector, which must block all bytecode interpreter threads and CPU
native code threads compiled by the JIT compiler before executing.</p></div>
<div class="paragraph"><p>POCA&#8217;s API design concept is more or less similar to Lua&#8217;s. This means that
concepts like hash tables (hashes), meta tables (hash table events), vectors
(arrays), etc. exist here too.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_imperative_and_structured">Imperative and structured</h3>
<div class="paragraph"><p>POCA supports structured programming in the style of C. POCA supports function
and block scoping with the keywords var, let and const. POCA requires explicit
semicolons, as automatic semicolon injection can introduce hard-to-detect bugs.
The only exception is that you can omit the last semicolon in a <code>function</code>,
<code>scope</code>, or <code>code</code> block.</p></div>
<div class="paragraph"><p>As with C-like languages, control flow can be achieved using <code>while</code>, <code>for</code>,
<code>do</code> / <code>while</code>, <code>if</code> / <code>else</code>, and <code>switch</code> / <code>case</code> statements. Functions are
weakly typed and can accept and return any type. Unspecified arguments default
to undefined. In addition to <code>for</code>, POCA also supports <code>foreach</code>, which can
iterate over ranges (arrays).</p></div>
</div>
<div class="sect2">
<h3 id="_weakly_typed">Weakly typed</h3>
<div class="paragraph"><p>POCA, like ECMAScript/JavaScript, is weakly typed. This means that in most, but
not all cases, certain types are implicitly assigned based on the operation
being performed, avoiding some typical JavaScript/ECMAScript quirks.</p></div>
</div>
<div class="sect2">
<h3 id="_dynamic">Dynamic</h3>
<div class="paragraph"><p>POCA is dynamically typed. Thus, a type is associated with a concrete value and
not with an expression. POCA supports several ways to test the type of objects,
including duck typing.</p></div>
</div>
<div class="sect2">
<h3 id="_everything_is_an_expression">Everything is an expression</h3>
<div class="paragraph"><p>In POCA, everything is an expression, even statements, declarations and
definitions. So the following code snippet is valid:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let a <span style="color: #990000">=</span> scope<span style="color: #FF0000">{</span>let b <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> <span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let c <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> c <span style="color: #990000">&lt;</span> <span style="color: #993399">6</span><span style="color: #990000">;</span> c<span style="color: #990000">++)</span><span style="color: #FF0000">{</span> b<span style="color: #990000">++</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span> b<span style="color: #990000">;</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span>
let bla <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">(</span>a <span style="color: #990000">!=</span> <span style="color: #993399">0</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span> <span style="color: #993399">1</span> <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span> a <span style="color: #990000">?</span> <span style="color: #993399">2</span> <span style="color: #990000">:</span> <span style="color: #993399">3</span> <span style="color: #FF0000">}</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>POCA essentially maps the mathematical concept and expression of "something"
into a complete scripting language.</p></div>
</div>
<div class="sect2">
<h3 id="_scoping">Scoping</h3>
<div class="paragraph"><p>POCA supports lexical scoping, meaning that a variable’s scope is determined by
its position in the source code.</p></div>
<div class="paragraph"><p>Variables declared with <code>var</code> are local-scoped; they are accessible only within
the scope in  which they are declared and any nested scopes. This behavior is
similar to JavaScript’s function-scoped variables declared with <code>var</code>. Such
variables are stored in a local hash table and can be accessed from the current
frame as well as all nested frames.</p></div>
<div class="paragraph"><p>In contrast, variables declared with <code>let</code> and <code>const</code> are block-scoped. Unlike
<code>var</code>, they are bound to the block in which they are declared, meaning their
visibility and lifetime are limited to that block and any nested blocks.
This behavior is similar to JavaScript’s block-scoped variables declared with
<code>let</code> and <code>const</code>. These block-bound variables are
<strong>not stored in the function’s normal local variable hash table</strong> (the structure
used for <code>var</code> variables). Instead, they reside in
<strong>specialized fast-access frame variable storages</strong> that are tied to the current
execution frame. This design provides quick access to block-scoped variables and
keeps them isolated per block. The engine manages these storages using a
<strong>display-list mechanism</strong> (a structure that maintains a list of active lexical
environments by nesting level), which allows nested blocks or inner functions to
efficiently reference variables from their enclosing blocks, even beyond the
immediate block context for closures. This is similar to how ECMAScript/JavaScript also
optimizes variable storage between registers and the stack, except that ECMAScript/JavaScript
uses environment objects for closures, while POCA uses a display-list mechanism based
on a chain of context frames, where every frame can have its own display list.</p></div>
<div class="paragraph"><p>This frame-based storage is utilized whenever a block-scoped variable needs to
exist beyond the immediate block execution or be accessible from an inner scope.
For example, if an inner function (closure) is defined inside a block and captures
a <code>let</code>/<code>const</code> variable, that variable will be placed in the frame storage so the
inner function can access it later. In such cases (or generally when the function
contains any nested scopes), the compiler ensures the variable lives in the frame
storage. On the other hand, if a block’s variables are <strong>purely local</strong> (used only
within the block and not needed by any outside code or closures), POCA may optimize
by keeping them in <strong>registers</strong> instead of in the frame storage. Using registers
for strictly local variables avoids the overhead of managing an extra storage
structure and yields faster access. In summary, <code>let</code> and <code>const</code> variables are
confined to their block and kept out of the general local table, living either
in a dedicated frame storage (when necessary for scope access or lifetime) or
directly in registers for maximal performance in self-contained cases.</p></div>
<div class="paragraph"><p><code>let</code> and <code>const</code> have higher priority than <code>var</code> in variable resolution. When
the same identifier is used for both a <code>let</code>/<code>const</code> variable and a <code>var</code> variable,
the <code>let</code>/<code>const</code> binding takes precedence within its scope, effectively shadowing
the <code>var</code> variable. Variables in inner scopes shadow variables in outer scopes
following standard lexical scoping rules - the most local binding wins regardless
of whether it&#8217;s declared with <code>var</code>, <code>let</code>, or <code>const</code>. The compiler resolves <code>let</code>
and <code>const</code> bindings at compile time through static analysis of the lexical scope,
providing fast access through registers or frame storage. In contrast, <code>var</code>
variables are stored in a hash table and resolved at runtime, allowing for dynamic
behavior but with the overhead of hash table lookups.</p></div>
<div class="paragraph"><p>Example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let a <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">const</span></span> b <span style="color: #990000">=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Func1</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  let c <span style="color: #990000">=</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
  scope<span style="color: #FF0000">{</span>
    let c <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>c<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
  <span style="font-style: italic"><span style="color: #9A1900">// c is 3 here and not 4</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">// because c is block-scoped</span></span>
  <span style="font-style: italic"><span style="color: #9A1900">// and not function-scoped</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> d <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span> <span style="font-style: italic"><span style="color: #9A1900">// d is function-scoped</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Func2</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
    let e <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
    scope<span style="color: #FF0000">{</span>
      let e <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
      <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>e<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
    <span style="font-style: italic"><span style="color: #9A1900">// e is 5 here and not 6</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// because e is block-scoped</span></span>
    <span style="font-style: italic"><span style="color: #9A1900">// and not function-scoped</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> a <span style="color: #990000">+</span> b <span style="color: #990000">+</span> c <span style="color: #990000">+</span> d <span style="color: #990000">+</span> e<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #000000">Func2</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000000">Func1</span></span><span style="color: #990000">();</span></tt></pre></div></div>
<div class="paragraph"><p>This approach ensures that <code>let</code> and <code>const</code> variables occupy the specialized fast-access
frame variable storages only when necessary, reducing overhead, much like how
ECMAScript/JavaScript optimizes variable storage between registers and the stack.</p></div>
<div class="paragraph"><p>POCA also supports closures, allowing functions to capture and remember the
environment in which they were created, even if that environment is no longer in scope.
This enables powerful programming techniques such as maintaining state or
encapsulating private variables. Note that closures in POCA behave slightly differently
from those in ECMAScript/JavaScript: in POCA, closures capture variables at the time
the function is defined rather than when the block is exited. For example, consider
the following code:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let a <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
let t <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Array</span></span><span style="color: #990000">();</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">10</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span><span style="color: #FF0000">{</span>
  let b <span style="color: #990000">=</span> i<span style="color: #990000">;</span>
  t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span>
    <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> a <span style="color: #990000">+</span> b <span style="color: #990000">+</span> i<span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">10</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>t<span style="color: #990000">[</span>i<span style="color: #990000">]());</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>This code outputs:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span>
<span style="color: #993399">20</span></tt></pre></div></div>
<div class="paragraph"><p>Here, the variable <code>i</code> is captured when the function is defined, causing each closure
to reference the same (final) value of <code>i</code>. In contrast, ECMAScript/JavaScript typically
captures the variable when the block is exited. To create a closure that captures the
current value of <code>i</code> in POCA, you can use an inline function to create a new scope:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let a <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
let t <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Array</span></span><span style="color: #990000">();</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">10</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span><span style="color: #FF0000">{</span>
  t<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span>
    <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>i<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
      let b <span style="color: #990000">=</span> i<span style="color: #990000">;</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
        <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> a <span style="color: #990000">+</span> b <span style="color: #990000">+</span> i<span style="color: #990000">;</span>
      <span style="color: #FF0000">}</span>
    <span style="color: #FF0000">}</span><span style="color: #990000">(</span>i<span style="color: #990000">)</span>
  <span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">10</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>t<span style="color: #990000">[</span>i<span style="color: #990000">]());</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>This code outputs:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #993399">1</span>
<span style="color: #993399">3</span>
<span style="color: #993399">5</span>
<span style="color: #993399">7</span>
<span style="color: #993399">9</span>
<span style="color: #993399">11</span>
<span style="color: #993399">13</span>
<span style="color: #993399">15</span>
<span style="color: #993399">17</span>
<span style="color: #993399">19</span></tt></pre></div></div>
<div class="paragraph"><p>In this case, the inline function creates a new scope that captures the current
value of <code>i</code>, resulting in each closure maintaining its own copy of <code>i</code>. This
behavior is similar to how closures are handled in Python, where variables are
captured at function definition time.</p></div>
<div class="paragraph"><p>Below is a Python script that demonstrates the "freeze effect" in closures, with
print statements that refer to the POCA behavior:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>
<span style="font-style: italic"><span style="color: #9A1900"># Without using default arguments:</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># All closures refer to the final values of 'i' and 'b'.</span></span>
a <span style="color: #990000">=</span> <span style="color: #993399">1</span>
closures_without_freeze <span style="color: #990000">=</span> <span style="color: #990000">[]</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> i <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="font-weight: bold"><span style="color: #000000">range</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">):</span>
    b <span style="color: #990000">=</span> i
    closures_without_freeze<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">lambda</span></span><span style="color: #990000">:</span> a <span style="color: #990000">+</span> b <span style="color: #990000">+</span> i<span style="color: #990000">)</span>

<span style="font-weight: bold"><span style="color: #0000FF">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Without freeze (no default arguments), like at POCA without inline function:"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> func <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> closures_without_freeze<span style="color: #990000">:</span>
    <span style="font-style: italic"><span style="color: #9A1900"># Since 'i' and 'b' end with the value 9, each call returns: 1 + 9 + 9 = 19.</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">func</span></span><span style="color: #990000">())</span>

<span style="font-style: italic"><span style="color: #9A1900"># Using default arguments to capture (freeze) the current values at function definition time:</span></span>
closures_with_freeze <span style="color: #990000">=</span> <span style="color: #990000">[]</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> i <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> <span style="font-weight: bold"><span style="color: #000000">range</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">):</span>
    b <span style="color: #990000">=</span> i
    <span style="font-style: italic"><span style="color: #9A1900"># Here, 'i=i' and 'b=b' freeze the current values.</span></span>
    closures_with_freeze<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">append</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">lambda</span></span> i<span style="color: #990000">=</span>i<span style="color: #990000">,</span> b<span style="color: #990000">=</span>b<span style="color: #990000">:</span> a <span style="color: #990000">+</span> b <span style="color: #990000">+</span> i<span style="color: #990000">)</span>

<span style="font-weight: bold"><span style="color: #0000FF">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"\nWith freeze (using default arguments), like at POCA with inline function:"</span><span style="color: #990000">)</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> func <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> closures_with_freeze<span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #0000FF">print</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">func</span></span><span style="color: #990000">())</span>

<span style="font-style: italic"><span style="color: #9A1900">### Explanation</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># - **Without Freeze:**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   The closures are created without default arguments, so they capture `i`</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   and `b` by reference. When the loop ends, both `i` and `b` have the final</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   value of 9, and every closure returns the same result (19). This is analogous</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   to POCA code that doesn’t use an inline function to create a new scope.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># - **With Freeze:**</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   Using default arguments (`i=i, b=b`), each lambda captures the current values</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   of `i` and `b` at the time it is defined. This “freezes” the values, similar</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   to how an inline function in POCA creates a new scope, ensuring that each</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#   closure maintains its own copy of `i` and `b`.</span></span>
<span style="font-style: italic"><span style="color: #9A1900">#</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># This script clearly illustrates the difference in behavior between closures that</span></span>
<span style="font-style: italic"><span style="color: #9A1900"># do not freeze variable values and those that do.</span></span>
</tt></pre></div></div>
<div class="paragraph"><p>Finally, POCA supports the <code>scope</code> and <code>code</code> keywords to create explicit scopes.
The <code>scope</code> keyword creates a new scope, while the <code>code</code> keyword creates a new
code block without introducing a new scope. This provides additional control over
variable visibility and lifetime.</p></div>
<div class="sect3">
<h4 id="_loop_closures_pragma">Loop closures pragma</h4>
<div class="paragraph"><p>By default, POCA captures loop variables by reference, meaning all closures created
inside a loop share the same binding and see the final value of the loop variable
after the loop completes. This is the classic behavior described above.</p></div>
<div class="paragraph"><p>With the <code>loopclosures</code> pragma, POCA can instead give each loop iteration its own
copy of the captured variables. Closures created in different iterations then each
see the value from their own iteration, rather than all sharing the final value.</p></div>
<div class="paragraph"><p><strong>Without <code>loopclosures</code> (default behavior):</strong></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let fns <span style="color: #990000">=</span> <span style="color: #990000">[];</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">3</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
  fns<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(()</span> <span style="color: #990000">=&gt;</span> i<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 3</span></span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 3</span></span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 3</span></span></tt></pre></div></div>
<div class="paragraph"><p>All three closures capture the same <code>i</code>, which ends up as 3 after the loop.</p></div>
<div class="paragraph"><p><strong>With <code>loopclosures on</code>:</strong></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>#pragma loopclosures on
let fns <span style="color: #990000">=</span> <span style="color: #990000">[];</span>
<span style="font-weight: bold"><span style="color: #0000FF">for</span></span> <span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> <span style="color: #993399">3</span><span style="color: #990000">;</span> i<span style="color: #990000">++)</span> <span style="color: #FF0000">{</span>
  fns<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(()</span> <span style="color: #990000">=&gt;</span> i<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 0</span></span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 1</span></span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>fns<span style="color: #990000">[</span><span style="color: #993399">2</span><span style="color: #990000">]());</span> <span style="font-style: italic"><span style="color: #9A1900">// 2</span></span></tt></pre></div></div>
<div class="paragraph"><p>Each iteration gets its own copy of <code>i</code>, so each closure remembers the value
from its iteration.</p></div>
<div class="paragraph"><p>The pragma can be toggled on and off at any point in the source:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>#pragma loopclosures on   <span style="font-style: italic"><span style="color: #9A1900">// enable per-iteration capture</span></span>
#pragma loopclosures off  <span style="font-style: italic"><span style="color: #9A1900">// disable (back to default shared capture)</span></span></tt></pre></div></div>
<div class="paragraph"><p>It can also be used in the function-call form:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>#<span style="font-weight: bold"><span style="color: #000000">pragma</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"loopclosures on"</span><span style="color: #990000">)</span></tt></pre></div></div>
<div class="paragraph"><p>The pragma applies to <code>for</code>, <code>foreach</code>, <code>forindex</code>, <code>forkey</code>, <code>while</code>, and
<code>do</code>/<code>while</code> loops. It only adds overhead in loops whose body actually contains
nested function definitions (closures); loops without closures are unaffected.</p></div>
<div class="paragraph"><p>Since per-iteration copying <em>can</em> have a performance cost (each iteration
allocates a snapshot of the captured variables), the pragma is disabled by
default. Enable it only where you actually need per-iteration capture semantics.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">Variables declared <em>outside</em> the loop (e.g. a counter declared before a
<code>while</code> loop) are still shared across iterations, since they belong to the
enclosing scope. Only the loop&#8217;s own iteration variables and body-scoped
<code>let</code>/<code>const</code> declarations get per-iteration copies.</td>
</tr></table>
</div>
</div>
<div class="sect3">
<h4 id="_static_vs_dynamic_scoping">Static vs Dynamic Scoping</h4>
<div class="paragraph"><p>An important distinction in POCA is that <code>let</code> and <code>const</code> follow static scoping rules based
on declaration order, while <code>var</code> uses dynamic scoping. This difference has significant
implications for when and how variables can be accessed:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Static scoping</strong> (<code>let</code>/<code>const</code>): Variables must be declared in the source code before
  they can be referenced. The compiler performs static analysis to resolve these bindings
  at compile time, ensuring that only variables defined earlier in the lexical scope are
  accessible.
</p>
</li>
<li>
<p>
<strong>Dynamic scoping</strong> (<code>var</code>): Variables are resolved at runtime and can be accessed from
  anywhere within their scope, regardless of the declaration order in the source code, unless
  they are shadowed by another <code>let</code>/<code>const</code>/<code>var</code> definition. This provides more flexibility
  but comes with the overhead of hash table lookups.
</p>
</li>
</ul></div>
<div class="paragraph"><p>This means that a function or <code>scope { ... }</code> block can reference a <code>var</code> variable that is
declared later in the source code (as long as it&#8217;s in the same scope), but attempting to
reference a <code>let</code> or <code>const</code> variable declared after the function or scope block will result
in a compile-time error.</p></div>
<div class="paragraph"><p>Example:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let outerLet <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">example</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>outerLet<span style="color: #990000">);</span>    <span style="font-style: italic"><span style="color: #9A1900">// Valid: outerLet is declared before the function</span></span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>dynamicVar<span style="color: #990000">);</span>  <span style="font-style: italic"><span style="color: #9A1900">// Valid: var uses dynamic scoping</span></span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>laterLet<span style="color: #990000">);</span>    <span style="font-style: italic"><span style="color: #9A1900">// Error: let/const are statically scoped by order</span></span>
<span style="color: #FF0000">}</span>

let laterLet <span style="color: #990000">=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> dynamicVar <span style="color: #990000">=</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">example</span></span><span style="color: #990000">();</span></tt></pre></div></div>
<div class="paragraph"><p>This design choice allows POCA to optimize <code>let</code> and <code>const</code> variables for performance
through static analysis and register allocation, while maintaining the flexibility of
<code>var</code> for dynamic programming patterns that require runtime variable resolution.</p></div>
<div class="paragraph"><p><strong>Comparison with JavaScript/ECMAScript:</strong></p></div>
<div class="paragraph"><p>For developers familiar with JavaScript/ECMAScript, it&#8217;s important to note that POCA&#8217;s
scoping behavior differs significantly from JavaScript&#8217;s hoisting mechanism:</p></div>
<div class="paragraph"><p>In <strong>JavaScript/ECMAScript</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong><code>let</code> and <code>const</code></strong>: Have block scope and are subject to the <strong>Temporal Dead Zone (TDZ)</strong>.
  They are hoisted but cannot be accessed before their declaration, resulting in a
  <code>ReferenceError</code> if referenced earlier in the code.
</p>
</li>
<li>
<p>
<strong><code>var</code></strong>: Has function scope (or global scope) and is <strong>hoisted</strong> to the top of its scope.
  The declaration is hoisted but not the initialization, so accessing a <code>var</code> variable before
  its declaration line returns <code>undefined</code> rather than an error.
</p>
</li>
</ul></div>
<div class="paragraph"><p>In <strong>POCA</strong>:</p></div>
<div class="ulist"><ul>
<li>
<p>
<strong><code>let</code> and <code>const</code></strong>: Follow <strong>static scoping by declaration order</strong> - they must be declared
  before use, with compile-time verification. This is a compile-time check, not a runtime TDZ.
</p>
</li>
<li>
<p>
<strong><code>var</code></strong>: Uses <strong>true dynamic scoping</strong> with runtime hash table lookup, allowing access from
  anywhere within the scope regardless of declaration order, unless they are shadowed by another
  <code>let</code>/<code>const</code>/<code>var</code> definition.
</p>
</li>
</ul></div>
<div class="paragraph"><p>The key difference: JavaScript uses hoisting (moving declarations to the top) with all three
keywords using lexical scoping, while POCA fundamentally distinguishes between compile-time
static resolution (<code>let</code>/<code>const</code>) and runtime dynamic resolution (<code>var</code>). This makes POCA&#8217;s
<code>var</code> more flexible for dynamic programming patterns, while <code>let</code>/<code>const</code> enable better
compile-time optimization.</p></div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_types">Data types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_which_data_types">Which data types?</h3>
<div class="paragraph"><p>POCA has the following data types on the language level:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>Null</code>: Special null value
</p>
</li>
<li>
<p>
<code>Number</code>: Double-precision floating point numbers (64 bit IEEE 754)
</p>
</li>
<li>
<p>
<code>String</code>: Immutable sequences of characters, ASCII and UTF-8 supported together with code
  point and code unit operations
</p>
</li>
<li>
<p>
<code>Hash</code>: Hash tables with support for meta tables (similar to Lua), equivalent to JavaScript objects
</p>
</li>
<li>
<p>
<code>Array</code>: Ordered collections of values
</p>
</li>
<li>
<p>
<code>Ghost</code>: Special type for external types, objects, and resources, for example,
  native primitives such as Locks, Threads, RegExps, etc.
</p>
</li>
<li>
<p>
<code>Function</code>: First-class functions, closures, and lambdas, linked to <code>Code</code> or <code>NativeCode</code>
  object values
</p>
</li>
<li>
<p>
<code>Code</code>: Bytecode-compiled code objects, including JIT-compiled native code
</p>
</li>
<li>
<p>
<code>NativeCode</code>: Native code objects, such as native functions wrapped for POCA
</p>
</li>
</ul></div>
<div class="paragraph"><p>and some additional types on the internal engine level, such as:</p></div>
<div class="ulist"><ul>
<li>
<p>
<code>Reference</code>: Internal reference type for objects, so just ignore this type
  when programming in POCA, as it&#8217;s not exposed on the language level.
</p>
</li>
</ul></div>
<div class="sect3">
<h4 id="_why_no_separate_boolean_type">Why No Separate Boolean Type?</h4>
<div class="paragraph"><p>You might wonder why there&#8217;s no dedicated <code>Boolean</code> type. In POCA, boolean values are represented using the <code>Number</code> type, where <code>0</code> is considered <code>false</code> and any non-zero value is considered <code>true</code>. For convenience, POCA provides <code>false</code> and <code>true</code> as predefined constants (aliases for <code>0</code> and <code>1</code> respectively), allowing you to write idiomatic boolean logic while maintaining the simplicity of a unified numeric type.</p></div>
<div class="paragraph"><p>While this may seem unusual, this approach simplifies the type system and allows for more flexible operations, similar to how some other scripting languages handle boolean logic. It also simplifies type coercion rules in expressions and the instruction set architecture.</p></div>
</div>
<div class="sect3">
<h4 id="_why_no_separate_integer_type">Why No Separate Integer Type?</h4>
<div class="paragraph"><p>All numbers are represented as double-precision floating point values. This design choice simplifies the language and avoids complications arising from having multiple numeric types, while still allowing for integer-like operations when needed, such as bitwise operations and integer division, although these are limited to the 53-bit integer range due to the IEEE 754 representation of the mantissa in 64-bit double-precision floats.</p></div>
</div>
<div class="sect3">
<h4 id="_why_no_separate_undefined_type">Why No Separate Undefined Type?</h4>
<div class="paragraph"><p>Instead of having both <code>null</code> and <code>undefined</code>, POCA uses the single special value <code>null</code> to represent both concepts. This unification simplifies the type system and reduces complexity when dealing with absent or uninitialized values.</p></div>
<div class="paragraph"><p>By default, read accesses to undefined hash table keys, array indices, or out-of-bounds array accesses throw exceptions rather than returning <code>undefined</code>. This design choice enhances code reliability and helps catch errors early, as developers are immediately alerted to attempts to access non-existent properties or indices that might otherwise lead to silent failures.</p></div>
<div class="paragraph"><p>However, POCA provides the optional chaining operator (<code>?.</code>) and nullish coalescing operator (<code>??</code>) for cases where you want to safely handle potentially missing values. These operators treat missing properties or out-of-bounds accesses as <code>null</code> without throwing exceptions, allowing for graceful fallback handling (see <a href="#nullish-coalescing-operator">[nullish-coalescing-operator]</a> for details).</p></div>
<div class="paragraph"><p>This approach minimizes confusion by providing a single representation for "no value" scenarios and aligns with POCA&#8217;s design philosophy of keeping the language straightforward and easy to use.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_classes">Classes</h3>
<div class="paragraph"><p>POCA supports class-based object-oriented programming (OOP) with the <code>class</code> keyword, which allows you to define classes, constructors, methods, and inheritance. These are just syntactic sugar over POCA&#8217;s
prototype-based OOP model with the <code>Hash</code> data type, making it easier to work with objects in a familiar way. See the other documentation sections for more details on classes and OOP in POCA.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_quick_tour">A quick tour</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_to_declare_variables">How to declare variables</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> x<span style="color: #990000">;</span>
let y<span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_how_to_use_variables">How to use variables</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>x <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
y <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
let z <span style="color: #990000">=</span> x <span style="color: #990000">+</span> y<span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_values">Values</h3>
<div class="paragraph"><p>The POCA syntax defines two types of values:</p></div>
<div class="ulist"><ul>
<li>
<p>
Fixed values
</p>
</li>
<li>
<p>
Variable values
</p>
</li>
</ul></div>
<div class="paragraph"><p>Fixed values are called Literals.</p></div>
<div class="paragraph"><p>Variable values are called Variables.</p></div>
</div>
<div class="sect2">
<h3 id="_literals">Literals</h3>
<div class="paragraph"><p>The two most important syntax rules for fixed values are:</p></div>
<div class="paragraph"><p>Numbers are written with or without decimals:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #993399">10.50</span>

<span style="color: #993399">1001</span></tt></pre></div></div>
<div class="paragraph"><p>Strings are text, written within double or single quotes:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #FF0000">"John Doe"</span>

<span style="color: #FF0000">'John Doe'</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_variables">Variables</h3>
<div class="paragraph"><p>In a programming language, variables are used to store data values.</p></div>
<div class="paragraph"><p>POCA uses the keywords var, let and const to declare variables.</p></div>
<div class="paragraph"><p>An equal sign is used to assign values to variables.</p></div>
<div class="paragraph"><p>In this example, x is defined as a variable. Then, x is assigned (given) the value 6:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let x<span style="color: #990000">;</span>
x <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// or</span></span>

let x <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_operators">Operators</h3>
<div class="paragraph"><p>POCA uses arithmetic operators ( + - * / ) to compute values:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">(</span><span style="color: #993399">5</span> <span style="color: #990000">+</span> <span style="color: #993399">6</span><span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">10</span></tt></pre></div></div>
<div class="paragraph"><p>POCA uses an assignment operator ( = ) to assign values to variables:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let x<span style="color: #990000">,</span> y<span style="color: #990000">;</span>
x <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
y <span style="color: #990000">=</span> <span style="color: #993399">6</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_expressions">Expressions</h3>
<div class="paragraph"><p>An expression is a combination of values, variables, and operators, which computes to a value.</p></div>
<div class="paragraph"><p>The computation is called an evaluation.</p></div>
<div class="paragraph"><p>For example, 5 * 10 evaluates to 50:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #993399">5</span> <span style="color: #990000">*</span> <span style="color: #993399">10</span></tt></pre></div></div>
<div class="paragraph"><p>Expressions can also contain variable values:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>x <span style="color: #990000">*</span> <span style="color: #993399">10</span></tt></pre></div></div>
<div class="paragraph"><p>The values can be of various types, such as numbers and strings.</p></div>
<div class="paragraph"><p>For example, <code>"John" ~ " " ~ "Doe"</code>, evaluates to <code>"John Doe"</code>, since <code>~</code> is using for string concatenation:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #FF0000">"John"</span> <span style="color: #990000">~</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">~</span> <span style="color: #FF0000">"Doe"</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_nullish_coalescing_operator">Nullish Coalescing Operator</h3>
<div class="paragraph"><p>POCA provides the nullish coalescing operator <code>??</code> to provide default values when dealing with <code>null</code> or <code>undefined</code>.</p></div>
<div class="paragraph"><p>The <code>??</code> operator returns its left operand if it&#8217;s not <code>null</code> or <code>undefined</code>, otherwise it returns the right operand:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let name <span style="color: #990000">=</span> userName <span style="color: #990000">??</span> <span style="color: #FF0000">"Guest"</span><span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Use userName if defined, else "Guest"</span></span>
let port <span style="color: #990000">=</span> config<span style="color: #990000">.</span>port <span style="color: #990000">??</span> <span style="color: #993399">8080</span><span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Use config.port if set, else 8080</span></span>
let value <span style="color: #990000">=</span> input <span style="color: #990000">??</span> fallback <span style="color: #990000">??</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Chain multiple defaults (left-to-right)</span></span></tt></pre></div></div>
<div class="sect3">
<h4 id="_important_nullish_vs_falsy">Important: Nullish vs Falsy</h4>
<div class="paragraph"><p>Unlike the logical OR operator (<code>||</code>), which treats all falsy values (<code>0</code>, <code>""</code>, <code>false</code>, <code>null</code>, <code>undefined</code>) as triggers for the default, <code>??</code> <strong>only</strong> triggers on <code>null</code> or <code>undefined</code>:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let count <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
let x <span style="color: #990000">=</span> count <span style="color: #990000">||</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">// x = 10 (because 0 is falsy)</span></span>
let y <span style="color: #990000">=</span> count <span style="color: #990000">??</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>    <span style="font-style: italic"><span style="color: #9A1900">// y = 0  (because 0 is not nullish)</span></span>

let name <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
let a <span style="color: #990000">=</span> name <span style="color: #990000">||</span> <span style="color: #FF0000">"Anonymous"</span><span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">// a = "Anonymous" (because "" is falsy)</span></span>
let b <span style="color: #990000">=</span> name <span style="color: #990000">??</span> <span style="color: #FF0000">"Anonymous"</span><span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">// b = ""  (because "" is not nullish)</span></span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_precedence_and_mixing_rules">Precedence and Mixing Rules</h4>
<div class="paragraph"><p>The <code>??</code> operator has <strong>very low precedence</strong>. It&#8217;s lower than <code>||</code> and <code>&amp;&amp;</code>, but higher than the ternary <code>?:</code>, so it evaluates <strong>after</strong> most other operators. This means that in mixed expressions, <code>||</code> and <code>&amp;&amp;</code> bind their operands first, and the resulting value then becomes the operand for <code>??</code>.</p></div>
<div class="paragraph"><p><strong>When mixing <code>??</code> with <code>&amp;&amp;</code> or <code>||</code>, the evaluation order may be surprising</strong> because those operators bind more tightly, as <code>??</code> has lower precedence:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// ⚠️ These parse in ways that may surprise you:</span></span>
result <span style="color: #990000">=</span> a <span style="color: #990000">||</span> b <span style="color: #990000">??</span> c<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Parsed as: (a || b) ?? c</span></span>
result <span style="color: #990000">=</span> a <span style="color: #990000">??</span> b <span style="color: #990000">&amp;&amp;</span> c<span style="color: #990000">;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Parsed as: a ?? (b &amp;&amp; c)</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// ✅ Always use explicit parentheses to show intent clearly:</span></span>
result <span style="color: #990000">=</span> a <span style="color: #990000">||</span> <span style="color: #990000">(</span>b <span style="color: #990000">??</span> c<span style="color: #990000">);</span>      <span style="font-style: italic"><span style="color: #9A1900">// OR first, then coalesce</span></span>
result <span style="color: #990000">=</span> <span style="color: #990000">(</span>a <span style="color: #990000">||</span> b<span style="color: #990000">)</span> <span style="color: #990000">??</span> c<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">// Coalesce the OR result</span></span>
result <span style="color: #990000">=</span> a <span style="color: #990000">??</span> <span style="color: #990000">(</span>b <span style="color: #990000">&amp;&amp;</span> c<span style="color: #990000">);</span>      <span style="font-style: italic"><span style="color: #9A1900">// Coalesce with AND result</span></span>
result <span style="color: #990000">=</span> <span style="color: #990000">(</span>a <span style="color: #990000">??</span> b<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> c<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">// AND after coalescing</span></span></tt></pre></div></div>
<div class="paragraph"><p>Because the low precedence can lead to unexpected grouping, <strong>always add parentheses when mixing <code>??</code> with logical operators</strong>, even though it&#8217;s not a syntax error. This makes your intent explicit and prevents subtle logic errors.</p></div>
</div>
<div class="sect3">
<h4 id="_common_patterns">Common Patterns</h4>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Providing default values</span></span>
let timeout <span style="color: #990000">=</span> options<span style="color: #990000">.</span>timeout <span style="color: #990000">??</span> <span style="color: #993399">5000</span><span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// Chaining fallbacks (evaluates left-to-right)</span></span>
let port <span style="color: #990000">=</span> args<span style="color: #990000">.</span>port <span style="color: #990000">??</span> env<span style="color: #990000">.</span>PORT <span style="color: #990000">??</span> config<span style="color: #990000">.</span>port <span style="color: #990000">??</span> <span style="color: #993399">3000</span><span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// With arithmetic - always use parentheses for clarity</span></span>
let total <span style="color: #990000">=</span> <span style="color: #990000">(</span>price <span style="color: #990000">??</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">+</span> <span style="color: #990000">(</span>tax <span style="color: #990000">??</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
let scaled <span style="color: #990000">=</span> <span style="color: #990000">(</span>value <span style="color: #990000">??</span> <span style="color: #993399">1</span><span style="color: #990000">)</span> <span style="color: #990000">*</span> multiplier<span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// With conditionals</span></span>
let message <span style="color: #990000">=</span> isError <span style="color: #990000">?</span> errorMsg <span style="color: #990000">:</span> <span style="color: #990000">(</span>userMsg <span style="color: #990000">??</span> <span style="color: #FF0000">"No message"</span><span style="color: #990000">);</span>

<span style="font-style: italic"><span style="color: #9A1900">// Safe property access</span></span>
let displayName <span style="color: #990000">=</span> user<span style="color: #990000">?.</span>profile<span style="color: #990000">?.</span>name <span style="color: #990000">??</span> <span style="color: #FF0000">"Anonymous"</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_why_not_forbid_mixing_like_javascript">Why Not Forbid Mixing Like JavaScript?</h4>
<div class="paragraph"><p>JavaScript/ECMAScript forbids mixing <code>??</code> with <code>&amp;&amp;</code> or <code>||</code> without parentheses as a syntax error. POCA takes a different approach: it allows mixing but with clear precedence rules where <code>??</code> has lower precedence than <code>&amp;&amp;</code> and <code>||</code>, and encourages developers to use parentheses for clarity. Parentheses are always recommended when combining these operators to avoid ambiguity, even when some people might find it tedious and/or too verbose.</p></div>
<div class="paragraph"><p>The rationale is that POCA developers should understand operator precedence, just as they do for arithmetic operators like <code>+</code> and <code>*</code>. Forbidding certain combinations adds language complexity without solving the real issue. Instead, POCA relies on documentation and linter warnings to guide developers toward using parentheses for clarity.</p></div>
<div class="paragraph"><p>This keeps the language simpler while still encouraging readable code through best practices rather than hard restrictions.</p></div>
</div>
<div class="sect3">
<h4 id="_best_practices">Best Practices</h4>
<div class="ulist"><ul>
<li>
<p>
Use <code>??</code> when you specifically want to handle <code>null</code>/<code>undefined</code> but preserve other falsy values like <code>0</code>, <code>""</code>, or <code>false</code>
</p>
</li>
<li>
<p>
Use <code>||</code> when you want to default on any falsy value
</p>
</li>
<li>
<p>
Always add parentheses when combining <code>??</code> with other logical operators for readability
</p>
</li>
<li>
<p>
Prefer clear, explicit grouping in complex expressions over relying on precedence rules
</p>
</li>
</ul></div>
</div>
</div>
<div class="sect2">
<h3 id="_optional_chaining">Optional Chaining</h3>
<div class="paragraph"><p>POCA provides optional chaining operators to safely access nested properties, array elements, and hash values without throwing exceptions when intermediate values are <code>null</code> or <code>undefined</code>.</p></div>
<div class="sect3">
<h4 id="_safe_property_access_code_code">Safe Property Access (<code>?.</code>)</h4>
<div class="paragraph"><p>The <code>?.</code> operator allows safe access to object properties. If the left operand is <code>null</code> or <code>undefined</code>, the entire expression returns <code>null</code> instead of throwing an exception:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let name <span style="color: #990000">=</span> user<span style="color: #990000">?.</span>profile<span style="color: #990000">?.</span>name<span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">// Safe nested access</span></span>
let email <span style="color: #990000">=</span> config<span style="color: #990000">?.</span>settings<span style="color: #990000">?.</span>email<span style="color: #990000">;</span>      <span style="font-style: italic"><span style="color: #9A1900">// Returns null if any part is null</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Traditional approach (verbose and error-prone)</span></span>
let oldWay <span style="color: #990000">=</span> user <span style="color: #990000">&amp;&amp;</span> user<span style="color: #990000">.</span>profile <span style="color: #990000">&amp;&amp;</span> user<span style="color: #990000">.</span>profile<span style="color: #990000">.</span>name<span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// With optional chaining (clean and safe)</span></span>
let newWay <span style="color: #990000">=</span> user<span style="color: #990000">?.</span>profile<span style="color: #990000">?.</span>name<span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_safe_bracket_access_code_code">Safe Bracket Access (<code>?[</code>)</h4>
<div class="paragraph"><p>The <code>?[</code> operator provides safe access to array elements and hash table values. POCA uses <code>?[key]</code> syntax (without a dot), which aligns with C#, Kotlin, Swift, Dart, and Groovy. Note that JavaScript/TypeScript uses <code>?.[key]</code> (with a dot) instead:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let value <span style="color: #990000">=</span> array<span style="color: #990000">?[</span>index<span style="color: #990000">];</span>                <span style="font-style: italic"><span style="color: #9A1900">// Safe array access</span></span>
let item <span style="color: #990000">=</span> hash<span style="color: #990000">?[</span>key<span style="color: #990000">];</span>                    <span style="font-style: italic"><span style="color: #9A1900">// Safe hash table access</span></span>
let nested <span style="color: #990000">=</span> data<span style="color: #990000">?[</span>prop<span style="color: #990000">]?[</span><span style="color: #993399">0</span><span style="color: #990000">]?[</span>field<span style="color: #990000">];</span>     <span style="font-style: italic"><span style="color: #9A1900">// Chain safe bracket access</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Practical example: word frequency counter</span></span>
let words <span style="color: #990000">=</span> <span style="color: #FF0000">{}</span><span style="color: #990000">;</span>
words<span style="color: #990000">[</span>word<span style="color: #990000">]</span> <span style="color: #990000">=</span> words<span style="color: #990000">?[</span>word<span style="color: #990000">]</span> <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>           <span style="font-style: italic"><span style="color: #9A1900">// Safely handles missing keys</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Returns null if:</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// - The array/hash is null or undefined</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// - The key doesn't exist (for hashes)</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// - The index is out of bounds (for arrays)</span></span></tt></pre></div></div>
<div class="paragraph"><p><strong>Important:</strong> POCA uses <code>?[key]</code> syntax (no dot), not <code>?[key?]</code>. While JavaScript/TypeScript use <code>?.[key]</code> (with a dot), most other languages use <code>?[key]</code> without the dot.</p></div>
</div>
<div class="sect3">
<h4 id="_combining_with_nullish_coalescing">Combining with Nullish Coalescing</h4>
<div class="paragraph"><p>Optional chaining pairs perfectly with the nullish coalescing operator for default values:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Provide defaults for missing values</span></span>
let port <span style="color: #990000">=</span> config<span style="color: #990000">?[</span>env<span style="color: #990000">]?[</span><span style="color: #FF0000">"port"</span><span style="color: #990000">]</span> <span style="color: #990000">??</span> <span style="color: #993399">8080</span><span style="color: #990000">;</span>
let timeout <span style="color: #990000">=</span> options<span style="color: #990000">?.</span>timeout <span style="color: #990000">??</span> <span style="color: #993399">5000</span><span style="color: #990000">;</span>
let name <span style="color: #990000">=</span> user<span style="color: #990000">?.</span>profile<span style="color: #990000">?.</span>name <span style="color: #990000">??</span> <span style="color: #FF0000">"Anonymous"</span><span style="color: #990000">;</span>

<span style="font-style: italic"><span style="color: #9A1900">// Word counting with safe access and default</span></span>
let count <span style="color: #990000">=</span> wordFrequency<span style="color: #990000">?[</span>word<span style="color: #990000">]</span> <span style="color: #990000">??</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
wordFrequency<span style="color: #990000">[</span>word<span style="color: #990000">]</span> <span style="color: #990000">=</span> count <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_short_circuiting_behavior">Short-Circuiting Behavior</h4>
<div class="paragraph"><p>When the left operand of <code>?.</code> or <code>?[</code> is <code>null</code> or <code>undefined</code>, the entire expression short-circuits and immediately returns <code>null</code> without evaluating the rest:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let result <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">?.</span>expensive<span style="color: #990000">?.</span>computation<span style="color: #990000">?.</span>here<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">// Returns null immediately</span></span>
let data <span style="color: #990000">=</span> undefined<span style="color: #990000">?[</span>key<span style="color: #990000">]?[</span>index<span style="color: #990000">];</span>               <span style="font-style: italic"><span style="color: #9A1900">// No array access attempted</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// This is safe and efficient:</span></span>
let value <span style="color: #990000">=</span> maybeNull<span style="color: #990000">?.</span><span style="font-weight: bold"><span style="color: #000000">method</span></span><span style="color: #990000">()?.</span>property<span style="color: #990000">?[</span><span style="color: #993399">0</span><span style="color: #990000">];</span>
<span style="font-style: italic"><span style="color: #9A1900">// If maybeNull is null, method() is never called</span></span></tt></pre></div></div>
</div>
<div class="sect3">
<h4 id="_best_practices_2">Best Practices</h4>
<div class="ulist"><ul>
<li>
<p>
Use <code>?.</code> for safe property access on objects that may be <code>null</code> or <code>undefined</code>
</p>
</li>
<li>
<p>
Use <code>?[</code> for safe array/hash access when keys or indices may not exist
</p>
</li>
<li>
<p>
Combine with <code>??</code> to provide default values for missing data
</p>
</li>
<li>
<p>
Don&#8217;t overuse: if a value should always exist, use regular access (<code>.</code> or <code>[</code>) to catch errors early
</p>
</li>
<li>
<p>
Optional chaining is for genuinely optional values, not to hide bugs
</p>
</li>
</ul></div>
</div>
<div class="sect3">
<h4 id="_comparison_with_other_languages">Comparison with Other Languages</h4>
<div class="paragraph"><p>POCA&#8217;s optional chaining syntax aligns with modern language standards. Note that JavaScript/TypeScript use <code>?.[</code> (with a dot) for bracket access, while most other languages use <code>?[</code> (without a dot):</p></div>
<div class="tableblock">
<table rules="all"
width="100%"
frame="border"
cellspacing="0" cellpadding="4">
<col width="40%" />
<col width="60%" />
<tbody>
<tr>
<td align="left" valign="top"><p class="table">Language</p></td>
<td align="left" valign="top"><p class="table">Syntax</p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">JavaScript/TypeScript</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?.[key]</code> <em>(note: dot before bracket)</em></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">C#</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?[key]</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Kotlin</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?[key]</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Swift</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?[key]</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">Dart</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?[key]</code></p></td>
</tr>
<tr>
<td align="left" valign="top"><p class="table">POCA</p></td>
<td align="left" valign="top"><p class="table"><code>obj?.prop</code> and <code>obj?[key]</code> <em>(follows C#/Kotlin/Swift/Dart)</em></p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_keywords">Keywords</h3>
<div class="paragraph"><p>POCA keywords are used to identify actions to be performed.</p></div>
<div class="paragraph"><p>The <code>let</code> keyword is used to create variables:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let x <span style="color: #990000">=</span> <span style="color: #993399">5</span> <span style="color: #990000">+</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
let y <span style="color: #990000">=</span> x <span style="color: #990000">*</span> <span style="color: #993399">10</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>The <code>var</code> keyword is also used to create variables:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> x <span style="color: #990000">=</span> <span style="color: #993399">5</span> <span style="color: #990000">+</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> y <span style="color: #990000">=</span> x <span style="color: #990000">*</span> <span style="color: #993399">10</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>However, the <code>const</code> keyword is also used to create constants:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">const</span></span> x <span style="color: #990000">=</span> <span style="color: #993399">5</span> <span style="color: #990000">+</span> <span style="color: #993399">6</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">const</span></span> y <span style="color: #990000">=</span> x <span style="color: #990000">*</span> <span style="color: #993399">10</span><span style="color: #990000">;</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_comments">Comments</h3>
<div class="paragraph"><p>Not all POCA statements are "executed".</p></div>
<div class="paragraph"><p>Code after double slashes <code>//</code> or between</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>```
<span style="font-style: italic"><span style="color: #9A1900">/*</span></span>
<span style="font-style: italic"><span style="color: #9A1900">```</span></span></tt></pre></div></div>
<div class="paragraph"><p>and</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>```
<span style="color: #990000">*/</span>
```</tt></pre></div></div>
<div class="paragraph"><p>is treated as a comment.</p></div>
<div class="paragraph"><p>Comments are ignored, and will not be executed:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let x <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>   <span style="font-style: italic"><span style="color: #9A1900">// I will be executed</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// x = 6;   I will NOT be executed</span></span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_identifiers_names">Identifiers / Names</h3>
<div class="paragraph"><p>Identifiers are POCA names.</p></div>
<div class="paragraph"><p>Identifiers are used to name variables and keywords, and functions.</p></div>
<div class="paragraph"><p>The rules for legal names are the same in most programming languages.</p></div>
<div class="paragraph"><p>A POCA name must begin with:</p></div>
<div class="ulist"><ul>
<li>
<p>
A letter (A-Z or a-z)
</p>
</li>
<li>
<p>
A dollar sign ($)
</p>
</li>
<li>
<p>
Or an underscore (_)
</p>
</li>
</ul></div>
<div class="paragraph"><p>Subsequent characters may be letters, digits, underscores, or dollar signs.</p></div>
<div class="paragraph"><p>Numbers are not allowed as the first character in names.</p></div>
<div class="paragraph"><p>This way POCA can easily distinguish identifiers from numbers.</p></div>
</div>
<div class="sect2">
<h3 id="_poca_is_case_sensitive">POCA is Case Sensitive</h3>
<div class="paragraph"><p>All POCA identifiers are case sensitive.</p></div>
<div class="paragraph"><p>The variables lastName and lastname, are two different variables:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let lastName <span style="color: #990000">=</span> <span style="color: #FF0000">"Doe"</span><span style="color: #990000">;</span>
let lastname <span style="color: #990000">=</span> <span style="color: #FF0000">"Peterson"</span><span style="color: #990000">;</span></tt></pre></div></div>
<div class="paragraph"><p>POCA does not interpret LET or Let as the keyword let.</p></div>
</div>
<div class="sect2">
<h3 id="_poca_character_set">POCA Character Set</h3>
<div class="paragraph"><p>POCA uses the Unicode character set together with the UTF8 internal encoding.</p></div>
<div class="paragraph"><p>Unicode covers (almost) all the characters, punctuations, and symbols in the world.</p></div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_learning_by_examples">Learning by examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_definitions">Definitions</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>a <span style="color: #990000">=</span> <span style="color: #993399">3.14159</span><span style="color: #990000">;</span>                    <span style="font-style: italic"><span style="color: #9A1900">// a is then inside in the current environment hash table</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> b <span style="color: #990000">=</span> <span style="color: #993399">0x10000</span><span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">// b is then inside in the current environment hash table</span></span>
let c <span style="color: #990000">=</span> 0b10101<span style="color: #990000">;</span>                <span style="font-style: italic"><span style="color: #9A1900">// c is then assigned to a VM-register or frame variable storage, depending on the scope</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">const</span></span> f <span style="color: #990000">=</span> <span style="color: #FF0000">"This is a constant"</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> <span style="color: #990000">(</span>g<span style="color: #990000">,</span> h<span style="color: #990000">)</span> <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">);</span>
<span style="color: #990000">(</span>g<span style="color: #990000">,</span> h<span style="color: #990000">)</span> <span style="color: #990000">=</span> <span style="color: #990000">(</span>h<span style="color: #990000">,</span> g<span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">bla</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">]:</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000000">let</span></span> <span style="color: #990000">(</span>x<span style="color: #990000">,</span> y<span style="color: #990000">,</span> z<span style="color: #990000">)</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">bla</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_scope_and_code_blocks">Scope and code blocks</h3>
<div class="paragraph"><p>POCA distinguishes between object/hash literals and code blocks based on their content. Object literals are defined by key-value pairs separated by colons (<code>:</code>) and commas (<code>,</code>). Code blocks consist of expressions or statements without this pattern. The <code>scope</code> and <em>code</em> keywords can be used to explicitly define a code block when ambiguity might arise, as everything in POCA is treated as an expression.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Example object literal with multiple keys</span></span>
<span style="color: #FF0000">{</span> name<span style="color: #990000">:</span> <span style="color: #FF0000">"Alice"</span><span style="color: #990000">,</span> age<span style="color: #990000">:</span> <span style="color: #993399">30</span> <span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Example object literal with a single key-value pair</span></span>
<span style="color: #FF0000">{</span> Name<span style="color: #990000">:</span> <span style="color: #FF0000">"Alice"</span> <span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Example shorthand object literal</span></span>
<span style="color: #FF0000">{</span> name<span style="color: #990000">,</span> age <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Assuming 'name' and 'age' are defined variables, it expands to { name: name, age: age }</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Example object literal with a single shorthand key</span></span>
<span style="color: #FF0000">{</span> name <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Assuming 'name' is defined, it expands to { name: name }</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Example code block</span></span>
<span style="color: #FF0000">{</span> name<span style="color: #990000">;</span> <span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// This is treated as a code block, because of the semicolon, for distinguishing it from an shorthand object literal</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Example code block</span></span>
<span style="color: #FF0000">{</span> <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hello"</span><span style="color: #990000">);</span> <span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Explicit code block using 'scope' where a new scope is created</span></span>
scope <span style="color: #FF0000">{</span>
  let x <span style="color: #990000">=</span> <span style="color: #993399">10</span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>x<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Example code block using 'code' where no new scope is created</span></span>
code <span style="color: #FF0000">{</span>
  let y <span style="color: #990000">=</span> <span style="color: #993399">20</span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>y<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Example of nested code blocks with explicit 'scope' and 'code' keywords</span></span>
scope <span style="color: #FF0000">{</span>
  let a <span style="color: #990000">=</span> <span style="color: #993399">1</span> <span style="color: #990000">+</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
  code <span style="color: #FF0000">{</span>
    let b <span style="color: #990000">=</span> a <span style="color: #990000">+</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>b<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>
</tt></pre></div></div>
<div class="paragraph"><p>Without the <code>scope</code> and <code>code</code> keyword, POCA relies on the presence of key-value pairs (identifiers followed by a colon and value) to identify object literals. If no such pattern is found within the curly braces, it&#8217;s treated as a code block. However, empty curly braces <code>{}</code> are always treated as an empty object literal, since inside code blocks, these are anyway effectively no-ops and will be garbage collected later.</p></div>
<div class="paragraph"><p>This distinction allows for flexibility in defining both objects and code blocks, making POCA&#8217;s syntax versatile.</p></div>
</div>
<div class="sect2">
<h3 id="_arrays_vectors">Arrays/Vectors</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let va <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">];</span>
let vb <span style="color: #990000">=</span> <span style="color: #990000">[</span><span style="color: #993399">4</span><span style="color: #990000">,</span> <span style="color: #993399">5</span><span style="color: #990000">,</span> <span style="color: #993399">6</span><span style="color: #990000">];</span>
let vc <span style="color: #990000">=</span> <span style="color: #990000">(</span>va <span style="color: #990000">~</span> vb<span style="color: #990000">)</span> <span style="color: #990000">~</span> <span style="color: #990000">[</span><span style="color: #993399">7</span><span style="color: #990000">,</span> <span style="color: #993399">8</span><span style="color: #990000">,</span> <span style="color: #993399">9</span><span style="color: #990000">];</span>  <span style="font-style: italic"><span style="color: #9A1900">// ~ is the concatenation operator for arrays, strings, etc.</span></span>
let vd <span style="color: #990000">=</span> vc<span style="color: #990000">[</span><span style="color: #993399">0</span> <span style="color: #990000">..</span> <span style="color: #993399">4</span><span style="color: #990000">];</span>             <span style="font-style: italic"><span style="color: #9A1900">// range slice copy</span></span>

va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span><span style="color: #993399">21</span><span style="color: #990000">);</span>
va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span><span style="color: #993399">42</span><span style="color: #990000">);</span>
va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">push</span></span><span style="color: #990000">(</span><span style="color: #993399">1337</span><span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>let i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i <span style="color: #990000">&lt;</span> va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">();</span> i<span style="color: #990000">++)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>va<span style="color: #990000">[</span>i<span style="color: #990000">]);</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000000">foreach</span></span><span style="color: #990000">(</span>let arrayElement <span style="font-weight: bold"><span style="color: #0000FF">in</span></span> vd<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>arrayElement<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(!</span>va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">empty</span></span><span style="color: #990000">())</span><span style="color: #FF0000">{</span>
  va<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">pop</span></span><span style="color: #990000">();</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Bla</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">[</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">];</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000000">let</span></span> <span style="color: #990000">(</span>a<span style="color: #990000">,</span> b<span style="color: #990000">,</span> c<span style="color: #990000">)</span> <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">Bla</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>a<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> b<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> c<span style="color: #990000">);</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_hashs_prototyping_objects">Hashs/Prototyping/Objects</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let aHash <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>
              bla<span style="color: #990000">:</span> <span style="color: #FF0000">"bla!"</span><span style="color: #990000">,</span>
              bluh<span style="color: #990000">:</span> <span style="color: #FF0000">"bluh?"</span>
            <span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">foreach</span></span><span style="color: #990000">(</span>let hashElement<span style="color: #990000">;</span> aHash<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>hashElement<span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">oa</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #FF0000">{}</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> x <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>a<span style="color: #990000">:</span> <span style="color: #993399">12</span><span style="color: #990000">,</span> y<span style="color: #990000">:()</span> <span style="color: #990000">=&gt;</span> <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>@a<span style="color: #990000">)</span><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
let y <span style="color: #990000">=</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">prototype</span></span><span style="color: #990000">:</span> x<span style="color: #990000">,</span> b<span style="color: #990000">:</span> <span style="color: #993399">34</span><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
let z <span style="color: #990000">=</span> <span style="color: #FF0000">{</span><span style="font-weight: bold"><span style="color: #0000FF">prototype</span></span><span style="color: #990000">:</span> y<span style="color: #990000">,</span> c<span style="color: #990000">:</span> <span style="color: #993399">56</span><span style="color: #FF0000">}</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">const</span></span> p <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>b<span style="color: #990000">:</span> <span style="color: #993399">42</span><span style="color: #990000">,</span> <span style="color: #FF0000">"c"</span><span style="color: #990000">:</span> <span style="color: #993399">41</span><span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>z<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">();</span>

y<span style="color: #990000">.</span>a<span style="color: #990000">=</span><span style="color: #993399">13</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>z<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">();</span>

z<span style="color: #990000">.</span>a<span style="color: #990000">=</span><span style="color: #993399">14</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>x<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>y<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>z<span style="color: #990000">.</span>a<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">();</span>

x<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">();</span>
y<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">();</span>
z<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_functions_lambdas">Functions/Lambdas</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Function parameters default to 'let'</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Test1</span></span><span style="color: #990000">(</span>a<span style="color: #990000">,</span> b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>a <span style="color: #990000">+</span> b<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">// a and b are treated as 'let' by default</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Explicit 'let' (same as default)</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Test2</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>a <span style="color: #990000">+</span> b<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Explicit 'var' when needed for hash table storage</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">Test3</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a<span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>a <span style="color: #990000">+</span> b<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">// a and b stored in local hash table</span></span>
<span style="color: #FF0000">}</span>

fastfunction <span style="font-weight: bold"><span style="color: #000000">Test4</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>a <span style="color: #990000">+</span> b<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

let <span style="font-weight: bold"><span style="color: #000000">u</span></span><span style="color: #990000">(</span>x<span style="color: #990000">=(</span><span style="color: #993399">4</span><span style="color: #990000">))</span> <span style="color: #990000">-&gt;</span> x <span style="color: #990000">*</span> x<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">u</span></span><span style="color: #990000">());</span>

<span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span> <span style="color: #990000">-&gt;</span> x <span style="color: #990000">*</span> x<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">y</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>

let z<span style="color: #990000">=(</span>x<span style="color: #990000">)=&gt;</span>x <span style="color: #990000">+</span> x<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">z</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>

let w<span style="color: #990000">=</span><span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)(</span>x <span style="color: #990000">*</span> x<span style="color: #990000">)</span> <span style="color: #990000">-</span> x<span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">w</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>

let a <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
 <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>x <span style="color: #990000">*</span> x<span style="color: #990000">)</span> <span style="color: #990000">-</span> x<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">a</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>

let <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="color: #990000">(</span>x <span style="color: #990000">*</span> x<span style="color: #990000">)</span> <span style="color: #990000">-</span> x<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">(</span><span style="color: #993399">4</span><span style="color: #990000">));</span>

<span style="font-weight: bold"><span style="color: #000000">f</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span> <span style="color: #990000">-&gt;</span> x <span style="color: #990000">+</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">g</span></span><span style="color: #990000">(</span>m<span style="color: #990000">,</span> x<span style="color: #990000">)</span> <span style="font-weight: bold"><span style="color: #000000">m</span></span><span style="color: #990000">(</span>x<span style="color: #990000">)</span> <span style="color: #990000">*</span> <span style="font-weight: bold"><span style="color: #000000">m</span></span><span style="color: #990000">(</span>x<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #000000">g</span></span><span style="color: #990000">(</span>f<span style="color: #990000">,</span> <span style="color: #993399">7</span><span style="color: #990000">));</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">searchPrimes</span></span><span style="color: #990000">(</span>let from<span style="color: #990000">,</span> let to<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">let</span></span> <span style="color: #990000">(</span>dummy<span style="color: #990000">,</span> primes<span style="color: #990000">,</span> n<span style="color: #990000">,</span> i<span style="color: #990000">,</span> j<span style="color: #990000">,</span> isPrime<span style="color: #990000">)</span> <span style="color: #990000">=</span> <span style="color: #990000">(</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">);</span>
  from <span style="color: #990000">=</span> <span style="color: #990000">+</span>from<span style="color: #990000">;</span>
  to <span style="color: #990000">=</span> <span style="color: #990000">+</span>to<span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>n <span style="color: #990000">=</span> from<span style="color: #990000">;</span> n<span style="color: #990000">&lt;=</span> to<span style="color: #990000">;</span> <span style="color: #990000">++</span>n<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    i <span style="color: #990000">=</span> <span style="color: #990000">((</span>n <span style="color: #990000">%</span> <span style="color: #993399">2</span><span style="color: #990000">)</span> <span style="color: #990000">===</span> <span style="color: #993399">0</span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #993399">2</span> <span style="color: #990000">:</span> <span style="color: #993399">3</span><span style="color: #990000">;</span>
    j <span style="color: #990000">=</span> n <span style="color: #990000">**</span> <span style="color: #993399">0.5</span><span style="color: #990000">;</span>
    isPrime <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(</span>i <span style="color: #990000">&lt;=</span> j<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>n <span style="color: #990000">%</span> i<span style="color: #990000">)</span> <span style="color: #990000">===</span> <span style="color: #993399">0</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
        isPrime <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>
        <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
      <span style="color: #FF0000">}</span>
      i <span style="color: #990000">+=</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
    primes <span style="color: #990000">+=</span> isPrime<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> primes<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="sect3">
<h4 id="_function_parameter_scoping">Function Parameter Scoping</h4>
<div class="paragraph"><p>Function parameters default to <code>let</code> scope unless explicitly declared with <code>var</code>.
This provides better performance by storing parameters directly in the function&#8217;s
register set or frame storage for faster access, depending on the scoping, avoiding
the hash table lookup overhead of <code>var</code>.</p></div>
<div class="paragraph"><p>When you need dynamic variable lookup or metaprogramming features, you can
explicitly declare parameters as <code>var</code> to store them in the local hash table.</p></div>
</div>
<div class="sect3">
<h4 id="_fast_functions">Fast Functions</h4>
<div class="paragraph"><p>POCA provides a <code>fastfunction</code> keyword for performance-critical functions. Fast
functions are optimized by eliminating the overhead of the local variable hash
table that regular functions use for <code>var</code>-declared variables.</p></div>
<div class="paragraph"><p><strong>Key Differences:</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
<strong>Regular <code>function</code></strong>: Variables declared with <code>var</code> are stored in a hash table
  (object/dictionary), which provides flexibility but has lookup overhead.
</p>
</li>
<li>
<p>
<strong>Fast <code>fastfunction</code></strong>: Does not create the hash table for <code>var</code> variables.
  All variables must be declared with <code>let</code> or <code>const</code>, which are stored directly
  in the function&#8217;s register set or frame storage for faster access, depending on
  the scoping.
</p>
</li>
</ul></div>
<div class="paragraph"><p><strong>When to use <code>fastfunction</code>:</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
Performance-critical code (hot loops, frequently called functions)
</p>
</li>
<li>
<p>
Functions that don&#8217;t need <code>var</code>'s dynamic properties
</p>
</li>
<li>
<p>
Functions where all local variables can be declared with <code>let</code> or <code>const</code>
</p>
</li>
</ul></div>
<div class="paragraph"><p><strong>Restrictions:</strong></p></div>
<div class="ulist"><ul>
<li>
<p>
Cannot use <code>var</code> keyword inside a <code>fastfunction</code>
</p>
</li>
<li>
<p>
All local variables must be declared with <code>let</code> or <code>const</code>
</p>
</li>
<li>
<p>
Slightly less flexible than regular functions, but significantly faster
</p>
</li>
</ul></div>
<div class="paragraph"><p><strong>Example:</strong></p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Regular function - uses hash table for var variables</span></span>
<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">regularSum</span></span><span style="color: #990000">(</span>a<span style="color: #990000">,</span> b<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> temp <span style="color: #990000">=</span> a <span style="color: #990000">+</span> b<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">// stored in hash table</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> temp <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Fast function - all variables in registers/frame storage</span></span>
fastfunction <span style="font-weight: bold"><span style="color: #000000">fastSum</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  let temp <span style="color: #990000">=</span> a <span style="color: #990000">+</span> b<span style="color: #990000">;</span>  <span style="font-style: italic"><span style="color: #9A1900">// stored directly in registers/frame storage</span></span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> temp <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Fast function with const</span></span>
fastfunction <span style="font-weight: bold"><span style="color: #000000">computeArea</span></span><span style="color: #990000">(</span>let width<span style="color: #990000">,</span> let height<span style="color: #990000">)</span> <span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">const</span></span> pi <span style="color: #990000">=</span> <span style="color: #993399">3.14159</span><span style="color: #990000">;</span>
  let radius <span style="color: #990000">=</span> width <span style="color: #990000">/</span> <span style="color: #993399">2</span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> pi <span style="color: #990000">*</span> radius <span style="color: #990000">*</span> radius<span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>For most code, regular <code>function</code> is fine. Use <code>fastfunction</code> when you&#8217;ve
identified performance bottlenecks through profiling and the function doesn&#8217;t
require <code>var</code> semantics.</p></div>
</div>
</div>
<div class="sect2">
<h3 id="_threads">Threads</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> terminated <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">thread1function</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(!</span>terminated<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Thread 1"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> thread1 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Thread</span></span><span style="color: #990000">(</span>thread1function<span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> thread2 <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Thread</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(!</span>terminated<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Thread 2"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">);</span>

thread1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">start</span></span><span style="color: #990000">();</span>
<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span>

thread2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">start</span></span><span style="color: #990000">();</span>
<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span>

terminated <span style="color: #990000">=</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>

thread1<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">wait</span></span><span style="color: #990000">();</span>
thread2<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">wait</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_coroutines">Coroutines</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">testcoroutinefunction</span></span><span style="color: #990000">(</span>i<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    Coroutine<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">yield</span></span><span style="color: #990000">(</span>i <span style="color: #990000">+=</span> Coroutine<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">get</span></span><span style="color: #990000">());</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> testcoroutine <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Coroutine</span></span><span style="color: #990000">(</span>testcoroutinefunction<span style="color: #990000">,</span> <span style="color: #993399">1000</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Go!</span><span style="color: #CC33CC">\r\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>testcoroutine<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">resume</span></span><span style="color: #990000">(</span><span style="color: #993399">100</span><span style="color: #990000">),</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\r\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>testcoroutine<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">resume</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">),</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\r\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>testcoroutine<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">resume</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">),</span><span style="color: #FF0000">" </span><span style="color: #CC33CC">\r\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_classes_2">Classes</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> <span style="color: #993399">12</span><span style="color: #990000">,</span> b <span style="color: #990000">=</span> <span style="color: #993399">4</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> Test <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> BaseClass <span style="color: #FF0000">{</span>

  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

  <span style="font-weight: bold"><span style="color: #000000">constructor</span></span><span style="color: #990000">(</span>let v<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">=</span> v <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>

  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">init</span></span><span style="color: #990000">(</span>let v<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">=</span> v <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>

  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
     <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">class</span></span> TestB <span style="font-weight: bold"><span style="color: #0000FF">extends</span></span> Test <span style="color: #FF0000">{</span>

  <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> x <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

  <span style="font-weight: bold"><span style="color: #000000">constructor</span></span><span style="color: #990000">(</span>let v<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">(</span>v <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x <span style="color: #990000">=</span> v <span style="color: #990000">+</span> <span style="color: #993399">1</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>

  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">();</span>    <span style="font-style: italic"><span style="color: #9A1900">// calls previous Test.B</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>  <span style="font-style: italic"><span style="color: #9A1900">// also calls previous Test.B</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">();</span>  <span style="font-style: italic"><span style="color: #9A1900">// also previous Test.c</span></span>
     <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a<span style="color: #990000">--;</span>
     <span style="font-weight: bold"><span style="color: #0000FF">super</span></span><span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>  <span style="font-style: italic"><span style="color: #9A1900">// also calls previous Test.B</span></span>
     <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>x<span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> Test<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">===</span> <span style="color: #993399">247</span><span style="color: #990000">)</span> <span style="color: #FF0000">"yeah"</span> <span style="font-weight: bold"><span style="color: #0000FF">else</span></span> <span style="color: #FF0000">"ups"</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">function</span></span> Test<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">d</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">((</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">===</span> <span style="color: #993399">247</span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"allright"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"fail!"</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

Test<span style="color: #990000">.</span>e <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">((</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">===</span> <span style="color: #993399">247</span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">":-)"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">":-("</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

let bla <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Test</span></span><span style="color: #990000">(</span><span style="color: #993399">246</span><span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>bla<span style="color: #990000">.</span>a<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> a<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> b<span style="color: #990000">);</span>

bla<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>
bla<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">();</span>
bla<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">d</span></span><span style="color: #990000">();</span>
bla<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">e</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Keys of object bla instance of class "</span><span style="color: #990000">,</span>bla<span style="color: #990000">.</span>className<span style="color: #990000">,</span><span style="color: #FF0000">":</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">,</span> scope<span style="color: #FF0000">{</span>
  let s <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #000000">forkey</span></span><span style="color: #990000">(</span>key<span style="color: #990000">;</span>bla<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    s <span style="color: #990000">~=</span> key <span style="color: #990000">~</span> <span style="color: #FF0000">" of type "</span> <span style="color: #990000">~</span> <span style="font-weight: bold"><span style="color: #0000FF">typeof</span></span><span style="color: #990000">(</span>bla<span style="color: #990000">[</span>key<span style="color: #990000">])</span> <span style="color: #990000">~</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  s
<span style="color: #FF0000">}</span><span style="color: #990000">);</span>

let blup <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">TestB</span></span><span style="color: #990000">(</span><span style="color: #993399">123</span><span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>blup<span style="color: #990000">.</span>a <span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> blup<span style="color: #990000">.</span>x<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span> <span style="color: #990000">,</span> <span style="color: #990000">(</span>blup <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Test<span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"true"</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"false"</span><span style="color: #990000">);</span>
blup<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>Test<span style="color: #990000">.</span>className<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>bla<span style="color: #990000">.</span>className<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>TestB<span style="color: #990000">.</span>className<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>blup<span style="color: #990000">.</span>className<span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> piep <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> blup<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">classType</span></span><span style="color: #990000">(</span><span style="color: #993399">42</span><span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>piep<span style="color: #990000">.</span>a<span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_modules_namespaces">Modules/Namespaces</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>module TestModule <span style="color: #FF0000">{</span>

  <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> TestClass <span style="color: #FF0000">{</span>

    <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #000000">constructor</span></span><span style="color: #990000">(</span>let v<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">=</span> v<span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

  <span style="color: #FF0000">}</span>

  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> TestClass<span style="color: #990000">::</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>

module OtherTestModule <span style="color: #FF0000">{</span>

  <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> TestClass <span style="color: #FF0000">{</span>

    <span style="font-weight: bold"><span style="color: #0000FF">class</span></span> TestClassInsideTestClass <span style="color: #FF0000">{</span>

      module TestModuleInsideTestClassInsideTestClass <span style="color: #FF0000">{</span>
      <span style="color: #FF0000">}</span>

    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">var</span></span> a <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span>

    <span style="font-weight: bold"><span style="color: #000000">constructor</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> v<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">=</span> v <span style="color: #990000">+</span> v<span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>

    <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> <span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>

  <span style="color: #FF0000">}</span>

  <span style="font-weight: bold"><span style="color: #0000FF">function</span></span> TestClass<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">()</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">.</span>a <span style="color: #990000">*</span> <span style="color: #993399">2</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>

<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> TestClassInstanceFromTestModule <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> TestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">TestClass</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
TestClassInstanceFromTestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>
TestClassInstanceFromTestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">();</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> TestClassInstanceFromOtherTestModule <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> OtherTestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">TestClass</span></span><span style="color: #990000">(</span><span style="color: #993399">2</span><span style="color: #990000">);</span>
TestClassInstanceFromOtherTestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">b</span></span><span style="color: #990000">();</span>
TestClassInstanceFromOtherTestModule<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">c</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_hash_events_operator_overloading">Hash events/Operator overloading</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> Vector <span style="color: #990000">=</span> <span style="color: #FF0000">{</span>
  create<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">function</span></span><span style="color: #990000">(</span>let vx<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">,</span> let vy<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">,</span> let vz<span style="color: #990000">=</span><span style="color: #993399">0</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #000000">setHashEvents</span></span><span style="color: #990000">(</span><span style="color: #FF0000">{</span>
                           <span style="font-weight: bold"><span style="color: #0000FF">prototype</span></span><span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">,</span>
                           x<span style="color: #990000">:</span> vx<span style="color: #990000">,</span>
                           y<span style="color: #990000">:</span> vy<span style="color: #990000">,</span>
                           z<span style="color: #990000">:</span> vz
                         <span style="color: #FF0000">}</span><span style="color: #990000">,</span> <span style="font-weight: bold"><span style="color: #0000FF">this</span></span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
  __add<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">fastfunction</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>a <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>b <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">))</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span>a<span style="color: #990000">.</span>x <span style="color: #990000">+</span> b<span style="color: #990000">.</span>x<span style="color: #990000">,</span> a<span style="color: #990000">.</span>y <span style="color: #990000">+</span> b<span style="color: #990000">.</span>y<span style="color: #990000">,</span> a<span style="color: #990000">.</span>z <span style="color: #990000">+</span> b<span style="color: #990000">.</span>z<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #FF0000">"No vector?"</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
  __sub<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">fastfunction</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>a <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>b <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">))</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span>a<span style="color: #990000">.</span>x <span style="color: #990000">-</span> b<span style="color: #990000">.</span>x<span style="color: #990000">,</span> a<span style="color: #990000">.</span>y <span style="color: #990000">-</span> b<span style="color: #990000">.</span>y<span style="color: #990000">,</span> a<span style="color: #990000">.</span>z <span style="color: #990000">-</span> b<span style="color: #990000">.</span>z<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #FF0000">"No vector?"</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
  __mul<span style="color: #990000">:</span><span style="font-weight: bold"><span style="color: #000000">fastfunction</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>a <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>b <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">))</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span>a<span style="color: #990000">.</span>x <span style="color: #990000">*</span> b<span style="color: #990000">.</span>x<span style="color: #990000">,</span> a<span style="color: #990000">.</span>y <span style="color: #990000">*</span> b<span style="color: #990000">.</span>y<span style="color: #990000">,</span> a<span style="color: #990000">.</span>z <span style="color: #990000">*</span> b<span style="color: #990000">.</span>z<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #FF0000">"No vector?"</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span><span style="color: #990000">,</span>
  __div<span style="color: #990000">:</span> <span style="font-weight: bold"><span style="color: #000000">fastfunction</span></span><span style="color: #990000">(</span>let a<span style="color: #990000">,</span> let b<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-style: italic"><span style="color: #9A1900">// Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)</span></span>
    <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>a <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">)</span> <span style="color: #990000">&amp;&amp;</span> <span style="color: #990000">(</span>b <span style="font-weight: bold"><span style="color: #0000FF">instanceof</span></span> Vector<span style="color: #990000">))</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">return</span></span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span>a<span style="color: #990000">.</span>x <span style="color: #990000">/</span> b<span style="color: #990000">.</span>x<span style="color: #990000">,</span> a<span style="color: #990000">.</span>y <span style="color: #990000">/</span> b<span style="color: #990000">.</span>y<span style="color: #990000">,</span> a<span style="color: #990000">.</span>z <span style="color: #990000">/</span> b<span style="color: #990000">.</span>z<span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #FF0000">"No vector?"</span><span style="color: #990000">;</span>
    <span style="color: #FF0000">}</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span><span style="color: #990000">;</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> va <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> vb <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #0000FF">new</span></span> <span style="font-weight: bold"><span style="color: #000000">Vector</span></span><span style="color: #990000">(</span><span style="color: #993399">10</span><span style="color: #990000">,</span> <span style="color: #993399">20</span><span style="color: #990000">,</span> <span style="color: #993399">30</span><span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #0000FF">var</span></span> vc <span style="color: #990000">=</span> va <span style="color: #990000">+</span> vb<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>vc<span style="color: #990000">.</span>x<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>y<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>z<span style="color: #990000">);</span>

vc <span style="color: #990000">-=</span> vb<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>vc<span style="color: #990000">.</span>x<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>y<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>z<span style="color: #990000">);</span>

vc <span style="color: #990000">*=</span> vb<span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>vc<span style="color: #990000">.</span>x<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>y<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>z<span style="color: #990000">);</span>

vc <span style="color: #990000">/=</span> <span style="color: #990000">(</span>va<span style="color: #990000">*</span>vb<span style="color: #990000">);</span>
<span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span>vc<span style="color: #990000">.</span>x<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>y<span style="color: #990000">,</span> <span style="color: #FF0000">" "</span><span style="color: #990000">,</span> vc<span style="color: #990000">.</span>z<span style="color: #990000">);</span>

<span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">();</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_regular_expressions">Regular expressions</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">var</span></span> expr <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">,</span> lineRegExp <span style="color: #990000">=</span> <span style="color: #FF6600">/^(.*)\\s*$/</span><span style="color: #990000">,</span> match <span style="color: #990000">=</span> <span style="color: #990000">[],</span> i <span style="color: #990000">=</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> currentScope <span style="color: #990000">=</span> <span style="color: #FF0000">{}</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">while</span></span><span style="color: #990000">(</span><span style="color: #993399">1</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">((</span>expr <span style="color: #990000">===</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span> <span style="color: #990000">?</span> <span style="color: #FF0000">"&gt; "</span> <span style="color: #990000">:</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\\</span><span style="color: #FF0000"> "</span><span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">(</span>match <span style="color: #990000">=</span> lineRegExp<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">match</span></span><span style="color: #990000">(</span>line <span style="color: #990000">=</span> <span style="font-weight: bold"><span style="color: #000000">readLine</span></span><span style="color: #990000">()))</span>  <span style="color: #FF0000">{</span>
    expr <span style="color: #990000">~=</span> match<span style="color: #990000">[</span><span style="color: #993399">0</span><span style="color: #990000">][</span><span style="color: #993399">1</span><span style="color: #990000">]</span> <span style="color: #990000">~</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">;</span>
    <span style="font-weight: bold"><span style="color: #0000FF">continue</span></span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">if</span></span><span style="color: #990000">((</span>expr <span style="color: #990000">~=</span> line<span style="color: #990000">)</span> <span style="color: #990000">===</span> <span style="color: #FF0000">""</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">try</span></span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"&lt; "</span> <span style="color: #990000">~</span> <span style="font-weight: bold"><span style="color: #000000">eval</span></span><span style="color: #990000">(</span>expr<span style="color: #990000">,</span> <span style="color: #FF0000">"&lt;eval&gt;"</span><span style="color: #990000">,</span> <span style="color: #990000">[],</span> <span style="font-weight: bold"><span style="color: #0000FF">null</span></span><span style="color: #990000">,</span> currentScope<span style="color: #990000">)</span> <span style="color: #990000">~</span> <span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">catch</span></span><span style="color: #990000">(</span>err<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #0000FF">for</span></span><span style="color: #990000">(</span>i <span style="color: #990000">=</span> err<span style="color: #990000">.</span><span style="font-weight: bold"><span style="color: #000000">size</span></span><span style="color: #990000">()</span> <span style="color: #990000">-</span> <span style="color: #993399">1</span><span style="color: #990000">;</span> i <span style="color: #990000">&gt;=</span> <span style="color: #993399">0</span><span style="color: #990000">;</span> i<span style="color: #990000">--)</span><span style="color: #FF0000">{</span>
      <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span>err<span style="color: #990000">[</span>i<span style="color: #990000">]</span> <span style="color: #990000">~</span> <span style="color: #FF0000">" "</span><span style="color: #990000">);</span>
    <span style="color: #FF0000">}</span>
    <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
  expr <span style="color: #990000">=</span> <span style="color: #FF0000">""</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_exception_handling">Exception handling</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #0000FF">try</span></span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hello "</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">catch</span></span><span style="color: #990000">(</span>c<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"dear "</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">finally</span></span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"World!</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #0000FF">try</span></span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hello "</span><span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">throw</span></span> <span style="color: #993399">123</span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">catch</span></span><span style="color: #990000">(</span>c<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"dear "</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span><span style="font-weight: bold"><span style="color: #0000FF">finally</span></span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #000000">print</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"World!</span><span style="color: #CC33CC">\n</span><span style="color: #FF0000">"</span><span style="color: #990000">);</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_when">When</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let aValue <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #000000">when</span></span><span style="color: #990000">(</span>aValue<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span><span style="color: #990000">(</span><span style="color: #993399">5</span> <span style="color: #990000">..</span> <span style="color: #993399">10</span><span style="color: #990000">,</span> <span style="color: #993399">15</span> <span style="color: #990000">..</span> <span style="color: #993399">17</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hey! "</span><span style="color: #990000">,</span> aValue<span style="color: #990000">);</span>
    aValue<span style="color: #990000">++;</span>
    retry<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span><span style="color: #990000">(</span><span style="color: #993399">18</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hi! "</span><span style="color: #990000">,</span> aValue<span style="color: #990000">);</span>
    fallthrough<span style="color: #990000">;</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span><span style="color: #990000">(</span><span style="color: #993399">19</span><span style="color: #990000">)</span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hallo!"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
  <span style="font-weight: bold"><span style="color: #0000FF">else</span></span><span style="color: #FF0000">{</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Ups!"</span><span style="color: #990000">);</span>
  <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_switch">Switch</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>let aValue <span style="color: #990000">=</span> <span style="color: #993399">5</span><span style="color: #990000">;</span>
<span style="font-weight: bold"><span style="color: #0000FF">switch</span></span><span style="color: #990000">(</span>aValue<span style="color: #990000">)</span><span style="color: #FF0000">{</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">1</span><span style="color: #990000">:</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">5</span><span style="color: #990000">:</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">7</span><span style="color: #990000">:</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">10</span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hey! "</span><span style="color: #990000">,</span> aValue<span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">18</span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hi! "</span><span style="color: #990000">,</span> aValue<span style="color: #990000">);</span>
  <span style="font-weight: bold"><span style="color: #0000FF">case</span></span> <span style="color: #993399">19</span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Hallo!"</span><span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
  <span style="font-weight: bold"><span style="color: #0000FF">default</span></span><span style="color: #990000">:</span>
    <span style="font-weight: bold"><span style="color: #000000">puts</span></span><span style="color: #990000">(</span><span style="color: #FF0000">"Ups!"</span><span style="color: #990000">);</span>
    <span style="font-weight: bold"><span style="color: #0000FF">break</span></span><span style="color: #990000">;</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_and_more">And more!</h3>
<div class="paragraph"><p>And much more!</p></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr /></div>
<div id="footer">
<div id="footer-text">
Last updated
 2026-02-20 03:12:34 CET
</div>
</div>
</body>
</html>
