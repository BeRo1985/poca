<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.23">
<title>POCA</title>
<style>
/*! Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */
/* Uncomment the following line when using as a custom stylesheet */
/* @import "https://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic,600,600italic%7CNoto+Serif:400,400italic,700,700italic%7CDroid+Sans+Mono:400,700"; */
html{font-family:sans-serif;-webkit-text-size-adjust:100%}
a{background:none}
a:focus{outline:thin dotted}
a:active,a:hover{outline:0}
h1{font-size:2em;margin:.67em 0}
b,strong{font-weight:bold}
abbr{font-size:.9em}
abbr[title]{cursor:help;border-bottom:1px dotted #dddddf;text-decoration:none}
dfn{font-style:italic}
hr{height:0}
mark{background:#ff0;color:#000}
code,kbd,pre,samp{font-family:monospace;font-size:1em}
pre{white-space:pre-wrap}
q{quotes:"\201C" "\201D" "\2018" "\2019"}
small{font-size:80%}
sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}
sup{top:-.5em}
sub{bottom:-.25em}
img{border:0}
svg:not(:root){overflow:hidden}
figure{margin:0}
audio,video{display:inline-block}
audio:not([controls]){display:none;height:0}
fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}
legend{border:0;padding:0}
button,input,select,textarea{font-family:inherit;font-size:100%;margin:0}
button,input{line-height:normal}
button,select{text-transform:none}
button,html input[type=button],input[type=reset],input[type=submit]{-webkit-appearance:button;cursor:pointer}
button[disabled],html input[disabled]{cursor:default}
input[type=checkbox],input[type=radio]{padding:0}
button::-moz-focus-inner,input::-moz-focus-inner{border:0;padding:0}
textarea{overflow:auto;vertical-align:top}
table{border-collapse:collapse;border-spacing:0}
*,::before,::after{box-sizing:border-box}
html,body{font-size:100%}
body{background:#fff;color:rgba(0,0,0,.8);padding:0;margin:0;font-family:"Noto Serif","DejaVu Serif",serif;line-height:1;position:relative;cursor:auto;-moz-tab-size:4;-o-tab-size:4;tab-size:4;word-wrap:anywhere;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}
a:hover{cursor:pointer}
img,object,embed{max-width:100%;height:auto}
object,embed{height:100%}
img{-ms-interpolation-mode:bicubic}
.left{float:left!important}
.right{float:right!important}
.text-left{text-align:left!important}
.text-right{text-align:right!important}
.text-center{text-align:center!important}
.text-justify{text-align:justify!important}
.hide{display:none}
img,object,svg{display:inline-block;vertical-align:middle}
textarea{height:auto;min-height:50px}
select{width:100%}
.subheader,.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{line-height:1.45;color:#7a2518;font-weight:400;margin-top:0;margin-bottom:.25em}
div,dl,dt,dd,ul,ol,li,h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6,pre,form,p,blockquote,th,td{margin:0;padding:0}
a{color:#2156a5;text-decoration:underline;line-height:inherit}
a:hover,a:focus{color:#1d4b8f}
a img{border:0}
p{line-height:1.6;margin-bottom:1.25em;text-rendering:optimizeLegibility}
p aside{font-size:.875em;line-height:1.35;font-style:italic}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{font-family:"Open Sans","DejaVu Sans",sans-serif;font-weight:300;font-style:normal;color:#ba3925;text-rendering:optimizeLegibility;margin-top:1em;margin-bottom:.5em;line-height:1.0125em}
h1 small,h2 small,h3 small,#toctitle small,.sidebarblock>.content>.title small,h4 small,h5 small,h6 small{font-size:60%;color:#e99b8f;line-height:0}
h1{font-size:2.125em}
h2{font-size:1.6875em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.375em}
h4,h5{font-size:1.125em}
h6{font-size:1em}
hr{border:solid #dddddf;border-width:1px 0 0;clear:both;margin:1.25em 0 1.1875em}
em,i{font-style:italic;line-height:inherit}
strong,b{font-weight:bold;line-height:inherit}
small{font-size:60%;line-height:inherit}
code{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;font-weight:400;color:rgba(0,0,0,.9)}
ul,ol,dl{line-height:1.6;margin-bottom:1.25em;list-style-position:outside;font-family:inherit}
ul,ol{margin-left:1.5em}
ul li ul,ul li ol{margin-left:1.25em;margin-bottom:0}
ul.circle{list-style-type:circle}
ul.disc{list-style-type:disc}
ul.square{list-style-type:square}
ul.circle ul:not([class]),ul.disc ul:not([class]),ul.square ul:not([class]){list-style:inherit}
ol li ul,ol li ol{margin-left:1.25em;margin-bottom:0}
dl dt{margin-bottom:.3125em;font-weight:bold}
dl dd{margin-bottom:1.25em}
blockquote{margin:0 0 1.25em;padding:.5625em 1.25em 0 1.1875em;border-left:1px solid #ddd}
blockquote,blockquote p{line-height:1.6;color:rgba(0,0,0,.85)}
@media screen and (min-width:768px){h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2}
h1{font-size:2.75em}
h2{font-size:2.3125em}
h3,#toctitle,.sidebarblock>.content>.title{font-size:1.6875em}
h4{font-size:1.4375em}}
table{background:#fff;margin-bottom:1.25em;border:1px solid #dedede;word-wrap:normal}
table thead,table tfoot{background:#f7f8f7}
table thead tr th,table thead tr td,table tfoot tr th,table tfoot tr td{padding:.5em .625em .625em;font-size:inherit;color:rgba(0,0,0,.8);text-align:left}
table tr th,table tr td{padding:.5625em .625em;font-size:inherit;color:rgba(0,0,0,.8)}
table tr.even,table tr.alt{background:#f8f8f7}
table thead tr th,table tfoot tr th,table tbody tr td,table tr td,table tfoot tr td{line-height:1.6}
h1,h2,h3,#toctitle,.sidebarblock>.content>.title,h4,h5,h6{line-height:1.2;word-spacing:-.05em}
h1 strong,h2 strong,h3 strong,#toctitle strong,.sidebarblock>.content>.title strong,h4 strong,h5 strong,h6 strong{font-weight:400}
.center{margin-left:auto;margin-right:auto}
.stretch{width:100%}
.clearfix::before,.clearfix::after,.float-group::before,.float-group::after{content:" ";display:table}
.clearfix::after,.float-group::after{clear:both}
:not(pre).nobreak{word-wrap:normal}
:not(pre).nowrap{white-space:nowrap}
:not(pre).pre-wrap{white-space:pre-wrap}
:not(pre):not([class^=L])>code{font-size:.9375em;font-style:normal!important;letter-spacing:0;padding:.1em .5ex;word-spacing:-.15em;background:#f7f7f8;border-radius:4px;line-height:1.45;text-rendering:optimizeSpeed}
pre{color:rgba(0,0,0,.9);font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;line-height:1.45;text-rendering:optimizeSpeed}
pre code,pre pre{color:inherit;font-size:inherit;line-height:inherit}
pre>code{display:block}
pre.nowrap,pre.nowrap pre{white-space:pre;word-wrap:normal}
em em{font-style:normal}
strong strong{font-weight:400}
.keyseq{color:rgba(51,51,51,.8)}
kbd{font-family:"Droid Sans Mono","DejaVu Sans Mono",monospace;display:inline-block;color:rgba(0,0,0,.8);font-size:.65em;line-height:1.45;background:#f7f7f7;border:1px solid #ccc;border-radius:3px;box-shadow:0 1px 0 rgba(0,0,0,.2),inset 0 0 0 .1em #fff;margin:0 .15em;padding:.2em .5em;vertical-align:middle;position:relative;top:-.1em;white-space:nowrap}
.keyseq kbd:first-child{margin-left:0}
.keyseq kbd:last-child{margin-right:0}
.menuseq,.menuref{color:#000}
.menuseq b:not(.caret),.menuref{font-weight:inherit}
.menuseq{word-spacing:-.02em}
.menuseq b.caret{font-size:1.25em;line-height:.8}
.menuseq i.caret{font-weight:bold;text-align:center;width:.45em}
b.button::before,b.button::after{position:relative;top:-1px;font-weight:400}
b.button::before{content:"[";padding:0 3px 0 2px}
b.button::after{content:"]";padding:0 2px 0 3px}
p a>code:hover{color:rgba(0,0,0,.9)}
#header,#content,#footnotes,#footer{width:100%;margin:0 auto;max-width:62.5em;*zoom:1;position:relative;padding-left:.9375em;padding-right:.9375em}
#header::before,#header::after,#content::before,#content::after,#footnotes::before,#footnotes::after,#footer::before,#footer::after{content:" ";display:table}
#header::after,#content::after,#footnotes::after,#footer::after{clear:both}
#content{margin-top:1.25em}
#content::before{content:none}
#header>h1:first-child{color:rgba(0,0,0,.85);margin-top:2.25rem;margin-bottom:0}
#header>h1:first-child+#toc{margin-top:8px;border-top:1px solid #dddddf}
#header>h1:only-child{border-bottom:1px solid #dddddf;padding-bottom:8px}
#header .details{border-bottom:1px solid #dddddf;line-height:1.45;padding-top:.25em;padding-bottom:.25em;padding-left:.25em;color:rgba(0,0,0,.6);display:flex;flex-flow:row wrap}
#header .details span:first-child{margin-left:-.125em}
#header .details span.email a{color:rgba(0,0,0,.85)}
#header .details br{display:none}
#header .details br+span::before{content:"\00a0\2013\00a0"}
#header .details br+span.author::before{content:"\00a0\22c5\00a0";color:rgba(0,0,0,.85)}
#header .details br+span#revremark::before{content:"\00a0|\00a0"}
#header #revnumber{text-transform:capitalize}
#header #revnumber::after{content:"\00a0"}
#content>h1:first-child:not([class]){color:rgba(0,0,0,.85);border-bottom:1px solid #dddddf;padding-bottom:8px;margin-top:0;padding-top:1rem;margin-bottom:1.25rem}
#toc{border-bottom:1px solid #e7e7e9;padding-bottom:.5em}
#toc>ul{margin-left:.125em}
#toc ul.sectlevel0>li>a{font-style:italic}
#toc ul.sectlevel0 ul.sectlevel1{margin:.5em 0}
#toc ul{font-family:"Open Sans","DejaVu Sans",sans-serif;list-style-type:none}
#toc li{line-height:1.3334;margin-top:.3334em}
#toc a{text-decoration:none}
#toc a:active{text-decoration:underline}
#toctitle{color:#7a2518;font-size:1.2em}
@media screen and (min-width:768px){#toctitle{font-size:1.375em}
body.toc2{padding-left:15em;padding-right:0}
body.toc2 #header>h1:nth-last-child(2){border-bottom:1px solid #dddddf;padding-bottom:8px}
#toc.toc2{margin-top:0!important;background:#f8f8f7;position:fixed;width:15em;left:0;top:0;border-right:1px solid #e7e7e9;border-top-width:0!important;border-bottom-width:0!important;z-index:1000;padding:1.25em 1em;height:100%;overflow:auto}
#toc.toc2 #toctitle{margin-top:0;margin-bottom:.8rem;font-size:1.2em}
#toc.toc2>ul{font-size:.9em;margin-bottom:0}
#toc.toc2 ul ul{margin-left:0;padding-left:1em}
#toc.toc2 ul.sectlevel0 ul.sectlevel1{padding-left:0;margin-top:.5em;margin-bottom:.5em}
body.toc2.toc-right{padding-left:0;padding-right:15em}
body.toc2.toc-right #toc.toc2{border-right-width:0;border-left:1px solid #e7e7e9;left:auto;right:0}}
@media screen and (min-width:1280px){body.toc2{padding-left:20em;padding-right:0}
#toc.toc2{width:20em}
#toc.toc2 #toctitle{font-size:1.375em}
#toc.toc2>ul{font-size:.95em}
#toc.toc2 ul ul{padding-left:1.25em}
body.toc2.toc-right{padding-left:0;padding-right:20em}}
#content #toc{border:1px solid #e0e0dc;margin-bottom:1.25em;padding:1.25em;background:#f8f8f7;border-radius:4px}
#content #toc>:first-child{margin-top:0}
#content #toc>:last-child{margin-bottom:0}
#footer{max-width:none;background:rgba(0,0,0,.8);padding:1.25em}
#footer-text{color:hsla(0,0%,100%,.8);line-height:1.44}
#content{margin-bottom:.625em}
.sect1{padding-bottom:.625em}
@media screen and (min-width:768px){#content{margin-bottom:1.25em}
.sect1{padding-bottom:1.25em}}
.sect1:last-child{padding-bottom:0}
.sect1+.sect1{border-top:1px solid #e7e7e9}
#content h1>a.anchor,h2>a.anchor,h3>a.anchor,#toctitle>a.anchor,.sidebarblock>.content>.title>a.anchor,h4>a.anchor,h5>a.anchor,h6>a.anchor{position:absolute;z-index:1001;width:1.5ex;margin-left:-1.5ex;display:block;text-decoration:none!important;visibility:hidden;text-align:center;font-weight:400}
#content h1>a.anchor::before,h2>a.anchor::before,h3>a.anchor::before,#toctitle>a.anchor::before,.sidebarblock>.content>.title>a.anchor::before,h4>a.anchor::before,h5>a.anchor::before,h6>a.anchor::before{content:"\00A7";font-size:.85em;display:block;padding-top:.1em}
#content h1:hover>a.anchor,#content h1>a.anchor:hover,h2:hover>a.anchor,h2>a.anchor:hover,h3:hover>a.anchor,#toctitle:hover>a.anchor,.sidebarblock>.content>.title:hover>a.anchor,h3>a.anchor:hover,#toctitle>a.anchor:hover,.sidebarblock>.content>.title>a.anchor:hover,h4:hover>a.anchor,h4>a.anchor:hover,h5:hover>a.anchor,h5>a.anchor:hover,h6:hover>a.anchor,h6>a.anchor:hover{visibility:visible}
#content h1>a.link,h2>a.link,h3>a.link,#toctitle>a.link,.sidebarblock>.content>.title>a.link,h4>a.link,h5>a.link,h6>a.link{color:#ba3925;text-decoration:none}
#content h1>a.link:hover,h2>a.link:hover,h3>a.link:hover,#toctitle>a.link:hover,.sidebarblock>.content>.title>a.link:hover,h4>a.link:hover,h5>a.link:hover,h6>a.link:hover{color:#a53221}
details,.audioblock,.imageblock,.literalblock,.listingblock,.stemblock,.videoblock{margin-bottom:1.25em}
details{margin-left:1.25rem}
details>summary{cursor:pointer;display:block;position:relative;line-height:1.6;margin-bottom:.625rem;outline:none;-webkit-tap-highlight-color:transparent}
details>summary::-webkit-details-marker{display:none}
details>summary::before{content:"";border:solid transparent;border-left:solid;border-width:.3em 0 .3em .5em;position:absolute;top:.5em;left:-1.25rem;transform:translateX(15%)}
details[open]>summary::before{border:solid transparent;border-top:solid;border-width:.5em .3em 0;transform:translateY(15%)}
details>summary::after{content:"";width:1.25rem;height:1em;position:absolute;top:.3em;left:-1.25rem}
.admonitionblock td.content>.title,.audioblock>.title,.exampleblock>.title,.imageblock>.title,.listingblock>.title,.literalblock>.title,.stemblock>.title,.openblock>.title,.paragraph>.title,.quoteblock>.title,table.tableblock>.title,.verseblock>.title,.videoblock>.title,.dlist>.title,.olist>.title,.ulist>.title,.qlist>.title,.hdlist>.title{text-rendering:optimizeLegibility;text-align:left;font-family:"Noto Serif","DejaVu Serif",serif;font-size:1rem;font-style:italic}
table.tableblock.fit-content>caption.title{white-space:nowrap;width:0}
.paragraph.lead>p,#preamble>.sectionbody>[class=paragraph]:first-of-type p{font-size:1.21875em;line-height:1.6;color:rgba(0,0,0,.85)}
.admonitionblock>table{border-collapse:separate;border:0;background:none;width:100%}
.admonitionblock>table td.icon{text-align:center;width:80px}
.admonitionblock>table td.icon img{max-width:none}
.admonitionblock>table td.icon .title{font-weight:bold;font-family:"Open Sans","DejaVu Sans",sans-serif;text-transform:uppercase}
.admonitionblock>table td.content{padding-left:1.125em;padding-right:1.25em;border-left:1px solid #dddddf;color:rgba(0,0,0,.6);word-wrap:anywhere}
.admonitionblock>table td.content>:last-child>:last-child{margin-bottom:0}
.exampleblock>.content{border:1px solid #e6e6e6;margin-bottom:1.25em;padding:1.25em;background:#fff;border-radius:4px}
.sidebarblock{border:1px solid #dbdbd6;margin-bottom:1.25em;padding:1.25em;background:#f3f3f2;border-radius:4px}
.sidebarblock>.content>.title{color:#7a2518;margin-top:0;text-align:center}
.exampleblock>.content>:first-child,.sidebarblock>.content>:first-child{margin-top:0}
.exampleblock>.content>:last-child,.exampleblock>.content>:last-child>:last-child,.exampleblock>.content .olist>ol>li:last-child>:last-child,.exampleblock>.content .ulist>ul>li:last-child>:last-child,.exampleblock>.content .qlist>ol>li:last-child>:last-child,.sidebarblock>.content>:last-child,.sidebarblock>.content>:last-child>:last-child,.sidebarblock>.content .olist>ol>li:last-child>:last-child,.sidebarblock>.content .ulist>ul>li:last-child>:last-child,.sidebarblock>.content .qlist>ol>li:last-child>:last-child{margin-bottom:0}
.literalblock pre,.listingblock>.content>pre{border-radius:4px;overflow-x:auto;padding:1em;font-size:.8125em}
@media screen and (min-width:768px){.literalblock pre,.listingblock>.content>pre{font-size:.90625em}}
@media screen and (min-width:1280px){.literalblock pre,.listingblock>.content>pre{font-size:1em}}
.literalblock pre,.listingblock>.content>pre:not(.highlight),.listingblock>.content>pre[class=highlight],.listingblock>.content>pre[class^="highlight "]{background:#f7f7f8}
.literalblock.output pre{color:#f7f7f8;background:rgba(0,0,0,.9)}
.listingblock>.content{position:relative}
.listingblock code[data-lang]::before{display:none;content:attr(data-lang);position:absolute;font-size:.75em;top:.425rem;right:.5rem;line-height:1;text-transform:uppercase;color:inherit;opacity:.5}
.listingblock:hover code[data-lang]::before{display:block}
.listingblock.terminal pre .command::before{content:attr(data-prompt);padding-right:.5em;color:inherit;opacity:.5}
.listingblock.terminal pre .command:not([data-prompt])::before{content:"$"}
.listingblock pre.highlightjs{padding:0}
.listingblock pre.highlightjs>code{padding:1em;border-radius:4px}
.listingblock pre.prettyprint{border-width:0}
.prettyprint{background:#f7f7f8}
pre.prettyprint .linenums{line-height:1.45;margin-left:2em}
pre.prettyprint li{background:none;list-style-type:inherit;padding-left:0}
pre.prettyprint li code[data-lang]::before{opacity:1}
pre.prettyprint li:not(:first-child) code[data-lang]::before{display:none}
table.linenotable{border-collapse:separate;border:0;margin-bottom:0;background:none}
table.linenotable td[class]{color:inherit;vertical-align:top;padding:0;line-height:inherit;white-space:normal}
table.linenotable td.code{padding-left:.75em}
table.linenotable td.linenos,pre.pygments .linenos{border-right:1px solid;opacity:.35;padding-right:.5em;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}
pre.pygments span.linenos{display:inline-block;margin-right:.75em}
.quoteblock{margin:0 1em 1.25em 1.5em;display:table}
.quoteblock:not(.excerpt)>.title{margin-left:-1.5em;margin-bottom:.75em}
.quoteblock blockquote,.quoteblock p{color:rgba(0,0,0,.85);font-size:1.15rem;line-height:1.75;word-spacing:.1em;letter-spacing:0;font-style:italic;text-align:justify}
.quoteblock blockquote{margin:0;padding:0;border:0}
.quoteblock blockquote::before{content:"\201c";float:left;font-size:2.75em;font-weight:bold;line-height:.6em;margin-left:-.6em;color:#7a2518;text-shadow:0 1px 2px rgba(0,0,0,.1)}
.quoteblock blockquote>.paragraph:last-child p{margin-bottom:0}
.quoteblock .attribution{margin-top:.75em;margin-right:.5ex;text-align:right}
.verseblock{margin:0 1em 1.25em}
.verseblock pre{font-family:"Open Sans","DejaVu Sans",sans-serif;font-size:1.15rem;color:rgba(0,0,0,.85);font-weight:300;text-rendering:optimizeLegibility}
.verseblock pre strong{font-weight:400}
.verseblock .attribution{margin-top:1.25rem;margin-left:.5ex}
.quoteblock .attribution,.verseblock .attribution{font-size:.9375em;line-height:1.45;font-style:italic}
.quoteblock .attribution br,.verseblock .attribution br{display:none}
.quoteblock .attribution cite,.verseblock .attribution cite{display:block;letter-spacing:-.025em;color:rgba(0,0,0,.6)}
.quoteblock.abstract blockquote::before,.quoteblock.excerpt blockquote::before,.quoteblock .quoteblock blockquote::before{display:none}
.quoteblock.abstract blockquote,.quoteblock.abstract p,.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{line-height:1.6;word-spacing:0}
.quoteblock.abstract{margin:0 1em 1.25em;display:block}
.quoteblock.abstract>.title{margin:0 0 .375em;font-size:1.15em;text-align:center}
.quoteblock.excerpt>blockquote,.quoteblock .quoteblock{padding:0 0 .25em 1em;border-left:.25em solid #dddddf}
.quoteblock.excerpt,.quoteblock .quoteblock{margin-left:0}
.quoteblock.excerpt blockquote,.quoteblock.excerpt p,.quoteblock .quoteblock blockquote,.quoteblock .quoteblock p{color:inherit;font-size:1.0625rem}
.quoteblock.excerpt .attribution,.quoteblock .quoteblock .attribution{color:inherit;font-size:.85rem;text-align:left;margin-right:0}
p.tableblock:last-child{margin-bottom:0}
td.tableblock>.content{margin-bottom:1.25em;word-wrap:anywhere}
td.tableblock>.content>:last-child{margin-bottom:-1.25em}
table.tableblock,th.tableblock,td.tableblock{border:0 solid #dedede}
table.grid-all>*>tr>*{border-width:1px}
table.grid-cols>*>tr>*{border-width:0 1px}
table.grid-rows>*>tr>*{border-width:1px 0}
table.frame-all{border-width:1px}
table.frame-ends{border-width:1px 0}
table.frame-sides{border-width:0 1px}
table.frame-none>colgroup+*>:first-child>*,table.frame-sides>colgroup+*>:first-child>*{border-top-width:0}
table.frame-none>:last-child>:last-child>*,table.frame-sides>:last-child>:last-child>*{border-bottom-width:0}
table.frame-none>*>tr>:first-child,table.frame-ends>*>tr>:first-child{border-left-width:0}
table.frame-none>*>tr>:last-child,table.frame-ends>*>tr>:last-child{border-right-width:0}
table.stripes-all>*>tr,table.stripes-odd>*>tr:nth-of-type(odd),table.stripes-even>*>tr:nth-of-type(even),table.stripes-hover>*>tr:hover{background:#f8f8f7}
th.halign-left,td.halign-left{text-align:left}
th.halign-right,td.halign-right{text-align:right}
th.halign-center,td.halign-center{text-align:center}
th.valign-top,td.valign-top{vertical-align:top}
th.valign-bottom,td.valign-bottom{vertical-align:bottom}
th.valign-middle,td.valign-middle{vertical-align:middle}
table thead th,table tfoot th{font-weight:bold}
tbody tr th{background:#f7f8f7}
tbody tr th,tbody tr th p,tfoot tr th,tfoot tr th p{color:rgba(0,0,0,.8);font-weight:bold}
p.tableblock>code:only-child{background:none;padding:0}
p.tableblock{font-size:1em}
ol{margin-left:1.75em}
ul li ol{margin-left:1.5em}
dl dd{margin-left:1.125em}
dl dd:last-child,dl dd:last-child>:last-child{margin-bottom:0}
li p,ul dd,ol dd,.olist .olist,.ulist .ulist,.ulist .olist,.olist .ulist{margin-bottom:.625em}
ul.checklist,ul.none,ol.none,ul.no-bullet,ol.no-bullet,ol.unnumbered,ul.unstyled,ol.unstyled{list-style-type:none}
ul.no-bullet,ol.no-bullet,ol.unnumbered{margin-left:.625em}
ul.unstyled,ol.unstyled{margin-left:0}
li>p:empty:only-child::before{content:"";display:inline-block}
ul.checklist>li>p:first-child{margin-left:-1em}
ul.checklist>li>p:first-child>.fa-square-o:first-child,ul.checklist>li>p:first-child>.fa-check-square-o:first-child{width:1.25em;font-size:.8em;position:relative;bottom:.125em}
ul.checklist>li>p:first-child>input[type=checkbox]:first-child{margin-right:.25em}
ul.inline{display:flex;flex-flow:row wrap;list-style:none;margin:0 0 .625em -1.25em}
ul.inline>li{margin-left:1.25em}
.unstyled dl dt{font-weight:400;font-style:normal}
ol.arabic{list-style-type:decimal}
ol.decimal{list-style-type:decimal-leading-zero}
ol.loweralpha{list-style-type:lower-alpha}
ol.upperalpha{list-style-type:upper-alpha}
ol.lowerroman{list-style-type:lower-roman}
ol.upperroman{list-style-type:upper-roman}
ol.lowergreek{list-style-type:lower-greek}
.hdlist>table,.colist>table{border:0;background:none}
.hdlist>table>tbody>tr,.colist>table>tbody>tr{background:none}
td.hdlist1,td.hdlist2{vertical-align:top;padding:0 .625em}
td.hdlist1{font-weight:bold;padding-bottom:1.25em}
td.hdlist2{word-wrap:anywhere}
.literalblock+.colist,.listingblock+.colist{margin-top:-.5em}
.colist td:not([class]):first-child{padding:.4em .75em 0;line-height:1;vertical-align:top}
.colist td:not([class]):first-child img{max-width:none}
.colist td:not([class]):last-child{padding:.25em 0}
.thumb,.th{line-height:0;display:inline-block;border:4px solid #fff;box-shadow:0 0 0 1px #ddd}
.imageblock.left{margin:.25em .625em 1.25em 0}
.imageblock.right{margin:.25em 0 1.25em .625em}
.imageblock>.title{margin-bottom:0}
.imageblock.thumb,.imageblock.th{border-width:6px}
.imageblock.thumb>.title,.imageblock.th>.title{padding:0 .125em}
.image.left,.image.right{margin-top:.25em;margin-bottom:.25em;display:inline-block;line-height:0}
.image.left{margin-right:.625em}
.image.right{margin-left:.625em}
a.image{text-decoration:none;display:inline-block}
a.image object{pointer-events:none}
sup.footnote,sup.footnoteref{font-size:.875em;position:static;vertical-align:super}
sup.footnote a,sup.footnoteref a{text-decoration:none}
sup.footnote a:active,sup.footnoteref a:active,#footnotes .footnote a:first-of-type:active{text-decoration:underline}
#footnotes{padding-top:.75em;padding-bottom:.75em;margin-bottom:.625em}
#footnotes hr{width:20%;min-width:6.25em;margin:-.25em 0 .75em;border-width:1px 0 0}
#footnotes .footnote{padding:0 .375em 0 .225em;line-height:1.3334;font-size:.875em;margin-left:1.2em;margin-bottom:.2em}
#footnotes .footnote a:first-of-type{font-weight:bold;text-decoration:none;margin-left:-1.05em}
#footnotes .footnote:last-of-type{margin-bottom:0}
#content #footnotes{margin-top:-.625em;margin-bottom:0;padding:.75em 0}
div.unbreakable{page-break-inside:avoid}
.big{font-size:larger}
.small{font-size:smaller}
.underline{text-decoration:underline}
.overline{text-decoration:overline}
.line-through{text-decoration:line-through}
.aqua{color:#00bfbf}
.aqua-background{background:#00fafa}
.black{color:#000}
.black-background{background:#000}
.blue{color:#0000bf}
.blue-background{background:#0000fa}
.fuchsia{color:#bf00bf}
.fuchsia-background{background:#fa00fa}
.gray{color:#606060}
.gray-background{background:#7d7d7d}
.green{color:#006000}
.green-background{background:#007d00}
.lime{color:#00bf00}
.lime-background{background:#00fa00}
.maroon{color:#600000}
.maroon-background{background:#7d0000}
.navy{color:#000060}
.navy-background{background:#00007d}
.olive{color:#606000}
.olive-background{background:#7d7d00}
.purple{color:#600060}
.purple-background{background:#7d007d}
.red{color:#bf0000}
.red-background{background:#fa0000}
.silver{color:#909090}
.silver-background{background:#bcbcbc}
.teal{color:#006060}
.teal-background{background:#007d7d}
.white{color:#bfbfbf}
.white-background{background:#fafafa}
.yellow{color:#bfbf00}
.yellow-background{background:#fafa00}
span.icon>.fa{cursor:default}
a span.icon>.fa{cursor:inherit}
.admonitionblock td.icon [class^="fa icon-"]{font-size:2.5em;text-shadow:1px 1px 2px rgba(0,0,0,.5);cursor:default}
.admonitionblock td.icon .icon-note::before{content:"\f05a";color:#19407c}
.admonitionblock td.icon .icon-tip::before{content:"\f0eb";text-shadow:1px 1px 2px rgba(155,155,0,.8);color:#111}
.admonitionblock td.icon .icon-warning::before{content:"\f071";color:#bf6900}
.admonitionblock td.icon .icon-caution::before{content:"\f06d";color:#bf3400}
.admonitionblock td.icon .icon-important::before{content:"\f06a";color:#bf0000}
.conum[data-value]{display:inline-block;color:#fff!important;background:rgba(0,0,0,.8);border-radius:50%;text-align:center;font-size:.75em;width:1.67em;height:1.67em;line-height:1.67em;font-family:"Open Sans","DejaVu Sans",sans-serif;font-style:normal;font-weight:bold}
.conum[data-value] *{color:#fff!important}
.conum[data-value]+b{display:none}
.conum[data-value]::after{content:attr(data-value)}
pre .conum[data-value]{position:relative;top:-.125em}
b.conum *{color:inherit!important}
.conum:not([data-value]):empty{display:none}
dt,th.tableblock,td.content,div.footnote{text-rendering:optimizeLegibility}
h1,h2,p,td.content,span.alt,summary{letter-spacing:-.01em}
p strong,td.content strong,div.footnote strong{letter-spacing:-.005em}
p,blockquote,dt,td.content,td.hdlist1,span.alt,summary{font-size:1.0625rem}
p{margin-bottom:1.25rem}
.sidebarblock p,.sidebarblock dt,.sidebarblock td.content,p.tableblock{font-size:1em}
.exampleblock>.content{background:#fffef7;border-color:#e0e0dc;box-shadow:0 1px 4px #e0e0dc}
.print-only{display:none!important}
@page{margin:1.25cm .75cm}
@media print{*{box-shadow:none!important;text-shadow:none!important}
html{font-size:80%}
a{color:inherit!important;text-decoration:underline!important}
a.bare,a[href^="#"],a[href^="mailto:"]{text-decoration:none!important}
a[href^="http:"]:not(.bare)::after,a[href^="https:"]:not(.bare)::after{content:"(" attr(href) ")";display:inline-block;font-size:.875em;padding-left:.25em}
abbr[title]{border-bottom:1px dotted}
abbr[title]::after{content:" (" attr(title) ")"}
pre,blockquote,tr,img,object,svg{page-break-inside:avoid}
thead{display:table-header-group}
svg{max-width:100%}
p,blockquote,dt,td.content{font-size:1em;orphans:3;widows:3}
h2,h3,#toctitle,.sidebarblock>.content>.title{page-break-after:avoid}
#header,#content,#footnotes,#footer{max-width:none}
#toc,.sidebarblock,.exampleblock>.content{background:none!important}
#toc{border-bottom:1px solid #dddddf!important;padding-bottom:0!important}
body.book #header{text-align:center}
body.book #header>h1:first-child{border:0!important;margin:2.5em 0 1em}
body.book #header .details{border:0!important;display:block;padding:0!important}
body.book #header .details span:first-child{margin-left:0!important}
body.book #header .details br{display:block}
body.book #header .details br+span::before{content:none!important}
body.book #toc{border:0!important;text-align:left!important;padding:0!important;margin:0!important}
body.book #toc,body.book #preamble,body.book h1.sect0,body.book .sect1>h2{page-break-before:always}
.listingblock code[data-lang]::before{display:block}
#footer{padding:0 .9375em}
.hide-on-print{display:none!important}
.print-only{display:block!important}
.hide-for-print{display:none!important}
.show-for-print{display:inherit!important}}
@media amzn-kf8,print{#header>h1:first-child{margin-top:1.25rem}
.sect1{padding:0!important}
.sect1+.sect1{border:0}
#footer{background:none}
#footer-text{color:rgba(0,0,0,.6);font-size:.9em}}
@media amzn-kf8{#header,#content,#footnotes,#footer{padding:0}}
</style>
</head>
<body class="article">
<div id="header">
<h1>POCA</h1>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
</div>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a></li>
<li><a href="#_architecture">Architecture</a></li>
<li><a href="#_overview">Overview</a>
<ul class="sectlevel2">
<li><a href="#_imperative_and_structured">Imperative and structured</a></li>
<li><a href="#_weakly_typed">Weakly typed</a></li>
<li><a href="#_dynamic">Dynamic</a></li>
<li><a href="#_everything_is_an_expression">Everything is an expression</a></li>
<li><a href="#_scoping">Scoping</a></li>
</ul>
</li>
<li><a href="#_data_types">Data types</a>
<ul class="sectlevel2">
<li><a href="#_which_data_types">Which data types?</a></li>
<li><a href="#_classes">Classes</a></li>
</ul>
</li>
<li><a href="#_a_quick_tour">A quick tour</a>
<ul class="sectlevel2">
<li><a href="#_how_to_declare_variables">How to declare variables</a></li>
<li><a href="#_how_to_use_variables">How to use variables</a></li>
<li><a href="#_values">Values</a></li>
<li><a href="#_literals">Literals</a></li>
<li><a href="#_variables">Variables</a></li>
<li><a href="#_operators">Operators</a></li>
<li><a href="#_expressions">Expressions</a></li>
<li><a href="#_nullish_coalescing_operator">Nullish Coalescing Operator</a></li>
<li><a href="#_keywords">Keywords</a></li>
<li><a href="#_comments">Comments</a></li>
<li><a href="#_identifiers_names">Identifiers / Names</a></li>
<li><a href="#_poca_is_case_sensitive">POCA is Case Sensitive</a></li>
<li><a href="#_poca_character_set">POCA Character Set</a></li>
</ul>
</li>
<li><a href="#_learning_by_examples">Learning by examples</a>
<ul class="sectlevel2">
<li><a href="#_definitions">Definitions</a></li>
<li><a href="#_scope_and_code_blocks">Scope and code blocks</a></li>
<li><a href="#_arraysvectors">Arrays/Vectors</a></li>
<li><a href="#_hashsprototypingobjects">Hashs/Prototyping/Objects</a></li>
<li><a href="#_functionslambdas">Functions/Lambdas</a></li>
<li><a href="#_threads">Threads</a></li>
<li><a href="#_coroutines">Coroutines</a></li>
<li><a href="#_classes_2">Classes</a></li>
<li><a href="#_modulesnamespaces">Modules/Namespaces</a></li>
<li><a href="#_hash_eventsoperator_overloading">Hash events/Operator overloading</a></li>
<li><a href="#_regular_expressions">Regular expressions</a></li>
<li><a href="#_exception_handling">Exception handling</a></li>
<li><a href="#_when">When</a></li>
<li><a href="#_switch">Switch</a></li>
<li><a href="#_and_more">And more!</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>POCA is JavaScript/ECMAScript-like, but it&#8217;s not the same. It has some
differences and even a few features that ECMAScript doesn&#8217;t have.</p>
</div>
<div class="paragraph">
<p>This document shows the features of POCA. POCA is a very powerful scripting
language, that uses some of the concepts coming from ECMAScript, Lua, Squirrel,
Nasal, Python, and Perl. POCA supports object-oriented programming (OOP) in two
flavours (prototype-based and class-based), as well as functional programming
and procedural programming styles.</p>
</div>
<div class="paragraph">
<p>In POCA everything is an expression; there are no statements, so for example
something like</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var a = scope {
  var b = 1;
  for (let c = 0; c &lt; 16; c++) {
    b += c + c
  };
  b;
};</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var a = if (b &lt; 1) {
          1
        } else if (b &lt; 4){
          2
        } else {
          3
        };</code></pre>
</div>
</div>
<div class="paragraph">
<p>is valid POCA code.</p>
</div>
<div class="paragraph">
<p>People familiar with other programming languages, especially scripting
languages such as JavaScript/ECMAScript in particular, are usually able to
learn POCA fairly quickly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_architecture">Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>POCA uses a frame stack, infinite register, bytecode instruction set
architecture (ISA).</p>
</div>
<div class="paragraph">
<p>Unlike almost all other script interpreters, POCA is thread-safe and scalable
when called from multiple CPU threads. No special handling is required and the
threads can be scheduled concurrently. There is no global lock (GIL) on the g
interpreter or the x86 just in time (JIT) compiler execution engine. The only
limit to scalability is the single-threaded incremental and generational
garbage collector, which must block all bytecode interpreter threads and CPU
native code threads compiled by the JIT compiler before executing.</p>
</div>
<div class="paragraph">
<p>POCA&#8217;s API design concept is more or less similar to Lua&#8217;s. This means that
concepts like hash tables (hashes), meta tables (hash table events), vectors
(arrays), etc. exist here too.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_overview">Overview</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_imperative_and_structured">Imperative and structured</h3>
<div class="paragraph">
<p>POCA supports structured programming in the style of C. POCA supports function
and block scoping with the keywords var, let and const. POCA requires explicit
semicolons, as automatic semicolon injection can introduce hard-to-detect bugs.
The only exception is that you can omit the last semicolon in a <code>function</code>,
<code>scope</code>, or <code>code</code> block.</p>
</div>
<div class="paragraph">
<p>As with C-like languages, control flow can be achieved using <code>while</code>, <code>for</code>,
<code>do</code> / <code>while</code>, <code>if</code> / <code>else</code>, and <code>switch</code> / <code>case</code> statements. Functions are
weakly typed and can accept and return any type. Unspecified arguments default
to undefined. In addition to <code>for</code>, POCA also supports <code>foreach</code>, which can
iterate over ranges (arrays).</p>
</div>
</div>
<div class="sect2">
<h3 id="_weakly_typed">Weakly typed</h3>
<div class="paragraph">
<p>POCA, like ECMAScript/JavaScript, is weakly typed. This means that in most, but
not all cases, certain types are implicitly assigned based on the operation
being performed, avoiding some typical JavaScript/ECMAScript quirks.</p>
</div>
</div>
<div class="sect2">
<h3 id="_dynamic">Dynamic</h3>
<div class="paragraph">
<p>POCA is dynamically typed. Thus, a type is associated with a concrete value and
not with an expression. POCA supports several ways to test the type of objects,
including duck typing.</p>
</div>
</div>
<div class="sect2">
<h3 id="_everything_is_an_expression">Everything is an expression</h3>
<div class="paragraph">
<p>In POCA, everything is an expression, even statements, declarations and
definitions. So the following code snippet is valid:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let a = scope{let b = 0; for(let c = 0; c &lt; 6; c++){ b++ }; b; };
let bla = if(a != 0){ 1 }else{ a ? 2 : 3 };</code></pre>
</div>
</div>
<div class="paragraph">
<p>POCA essentially maps the mathematical concept and expression of "something"
into a complete scripting language.</p>
</div>
</div>
<div class="sect2">
<h3 id="_scoping">Scoping</h3>
<div class="paragraph">
<p>POCA supports lexical scoping, meaning that a variable’s scope is determined by
its position in the source code.</p>
</div>
<div class="paragraph">
<p>Variables declared with <code>var</code> are local-scoped; they are accessible only within
the scope in  which they are declared and any nested scopes. This behavior is
similar to JavaScript’s function-scoped variables declared with <code>var</code>. Such
variables are stored in a local hash table and can be accessed from the current
frame as well as all nested frames.</p>
</div>
<div class="paragraph">
<p>In contrast, variables declared with <code>let</code> and <code>const</code> are block-scoped. Unlike
<code>var</code>, they are bound to the block in which they are declared, meaning their
visibility and lifetime are limited to that block and any nested blocks.
This behavior is similar to JavaScript’s block-scoped variables declared with
<code>let</code> and <code>const</code>. These block-bound variables are
<strong>not stored in the function’s normal local variable hash table</strong> (the structure
used for <code>var</code> variables). Instead, they reside in
<strong>specialized fast-access frame variable storages</strong> that are tied to the current
execution frame. This design provides quick access to block-scoped variables and
keeps them isolated per block. The engine manages these storages using a
<strong>display-list mechanism</strong> (a structure that maintains a list of active lexical
environments by nesting level), which allows nested blocks or inner functions to
efficiently reference variables from their enclosing blocks, even beyond the
immediate block context for closures. This is similar to how ECMAScript/JavaScript also
optimizes variable storage between registers and the stack, except that ECMAScript/JavaScript
uses environment objects for closures, while POCA uses a display-list mechanism based
on a chain of context frames, where every frame can have its own display list.</p>
</div>
<div class="paragraph">
<p>This frame-based storage is utilized whenever a block-scoped variable needs to
exist beyond the immediate block execution or be accessible from an inner scope.
For example, if an inner function (closure) is defined inside a block and captures
a <code>let</code>/<code>const</code> variable, that variable will be placed in the frame storage so the
inner function can access it later. In such cases (or generally when the function
contains any nested scopes), the compiler ensures the variable lives in the frame
storage. On the other hand, if a block’s variables are <strong>purely local</strong> (used only
within the block and not needed by any outside code or closures), POCA may optimize
by keeping them in <strong>registers</strong> instead of in the frame storage. Using registers
for strictly local variables avoids the overhead of managing an extra storage
structure and yields faster access. In summary, <code>let</code> and <code>const</code> variables are
confined to their block and kept out of the general local table, living either
in a dedicated frame storage (when necessary for scope access or lifetime) or
directly in registers for maximal performance in self-contained cases.</p>
</div>
<div class="paragraph">
<p><code>let</code> and <code>const</code> have higher priority than <code>var</code> in variable resolution. When
the same identifier is used for both a <code>let</code>/<code>const</code> variable and a <code>var</code> variable,
the <code>let</code>/<code>const</code> binding takes precedence within its scope, effectively shadowing
the <code>var</code> variable. Variables in inner scopes shadow variables in outer scopes
following standard lexical scoping rules - the most local binding wins regardless
of whether it&#8217;s declared with <code>var</code>, <code>let</code>, or <code>const</code>. The compiler resolves <code>let</code>
and <code>const</code> bindings at compile time through static analysis of the lexical scope,
providing fast access through registers or frame storage. In contrast, <code>var</code>
variables are stored in a hash table and resolved at runtime, allowing for dynamic
behavior but with the overhead of hash table lookups.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let a = 1;
const b = 2;
function Func1(){
  let c = 3;
  scope{
    let c = 4;
    puts(c);
  }
  // c is 3 here and not 4
  // because c is block-scoped
  // and not function-scoped
  var d = 4; // d is function-scoped
  function Func2(){
    let e = 5;
    scope{
      let e = 6;
      puts(e);
    }
    // e is 5 here and not 6
    // because e is block-scoped
    // and not function-scoped
    return a + b + c + d + e;
  }
  Func2();
}
Func1();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This approach ensures that <code>let</code> and <code>const</code> variables occupy the specialized fast-access
frame variable storages only when necessary, reducing overhead, much like how
ECMAScript/JavaScript optimizes variable storage between registers and the stack.</p>
</div>
<div class="paragraph">
<p>POCA also supports closures, allowing functions to capture and remember the
environment in which they were created, even if that environment is no longer in scope.
This enables powerful programming techniques such as maintaining state or
encapsulating private variables. Note that closures in POCA behave slightly differently
from those in ECMAScript/JavaScript: in POCA, closures capture variables at the time
the function is defined rather than when the block is exited. For example, consider
the following code:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let a = 1;
let t = new Array();
for(let i = 0; i &lt; 10; i++){
  let b = i;
  t.push(
    function(){
      return a + b + i;
    }
  );
}
for(let i = 0; i &lt; 10; i++){
  puts(t[i]());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code outputs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">20
20
20
20
20
20
20
20
20
20</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, the variable <code>i</code> is captured when the function is defined, causing each closure
to reference the same (final) value of <code>i</code>. In contrast, ECMAScript/JavaScript typically
captures the variable when the block is exited. To create a closure that captures the
current value of <code>i</code> in POCA, you can use an inline function to create a new scope:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let a = 1;
let t = new Array();
for(let i = 0; i &lt; 10; i++){
  t.push(
    function(i){
      let b = i;
      return function(){
        return a + b + i;
      }
    }(i)
  );
}
for(let i = 0; i &lt; 10; i++){
  puts(t[i]());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This code outputs:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">1
3
5
7
9
11
13
15
17
19</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case, the inline function creates a new scope that captures the current
value of <code>i</code>, resulting in each closure maintaining its own copy of <code>i</code>. This
behavior is similar to how closures are handled in Python, where variables are
captured at function definition time.</p>
</div>
<div class="paragraph">
<p>Below is a Python script that demonstrates the "freeze effect" in closures, with
print statements that refer to the POCA behavior:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-python" data-lang="python"># Without using default arguments:
# All closures refer to the final values of 'i' and 'b'.
a = 1
closures_without_freeze = []
for i in range(10):
    b = i
    closures_without_freeze.append(lambda: a + b + i)

print("Without freeze (no default arguments), like at POCA without inline function:")
for func in closures_without_freeze:
    # Since 'i' and 'b' end with the value 9, each call returns: 1 + 9 + 9 = 19.
    print(func())

# Using default arguments to capture (freeze) the current values at function definition time:
closures_with_freeze = []
for i in range(10):
    b = i
    # Here, 'i=i' and 'b=b' freeze the current values.
    closures_with_freeze.append(lambda i=i, b=b: a + b + i)

print("\nWith freeze (using default arguments), like at POCA with inline function:")
for func in closures_with_freeze:
    print(func())

### Explanation
#
# - **Without Freeze:**
#   The closures are created without default arguments, so they capture `i`
#   and `b` by reference. When the loop ends, both `i` and `b` have the final
#   value of 9, and every closure returns the same result (19). This is analogous
#   to POCA code that doesn’t use an inline function to create a new scope.
#
# - **With Freeze:**
#   Using default arguments (`i=i, b=b`), each lambda captures the current values
#   of `i` and `b` at the time it is defined. This “freezes” the values, similar
#   to how an inline function in POCA creates a new scope, ensuring that each
#   closure maintains its own copy of `i` and `b`.
#
# This script clearly illustrates the difference in behavior between closures that
# do not freeze variable values and those that do.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Finally, POCA supports the <code>scope</code> and <code>code</code> keywords to create explicit scopes.
The <code>scope</code> keyword creates a new scope, while the <code>code</code> keyword creates a new
code block without introducing a new scope. This provides additional control over
variable visibility and lifetime.</p>
</div>
<div class="sect3">
<h4 id="_static_vs_dynamic_scoping">Static vs Dynamic Scoping</h4>
<div class="paragraph">
<p>An important distinction in POCA is that <code>let</code> and <code>const</code> follow static scoping rules based
on declaration order, while <code>var</code> uses dynamic scoping. This difference has significant
implications for when and how variables can be accessed:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Static scoping</strong> (<code>let</code>/<code>const</code>): Variables must be declared in the source code before
they can be referenced. The compiler performs static analysis to resolve these bindings
at compile time, ensuring that only variables defined earlier in the lexical scope are
accessible.</p>
</li>
<li>
<p><strong>Dynamic scoping</strong> (<code>var</code>): Variables are resolved at runtime and can be accessed from
anywhere within their scope, regardless of the declaration order in the source code, unless
they are shadowed by another <code>let</code>/<code>const</code>/<code>var</code> definition. This provides more flexibility
but comes with the overhead of hash table lookups.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>This means that a function or <code>scope { &#8230;&#8203; }</code> block can reference a <code>var</code> variable that is
declared later in the source code (as long as it&#8217;s in the same scope), but attempting to
reference a <code>let</code> or <code>const</code> variable declared after the function or scope block will result
in a compile-time error.</p>
</div>
<div class="paragraph">
<p>Example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let outerLet = 1;

function example(){
  puts(outerLet);    // Valid: outerLet is declared before the function
  puts(dynamicVar);  // Valid: var uses dynamic scoping
  puts(laterLet);    // Error: let/const are statically scoped by order
}

let laterLet = 2;
var dynamicVar = 3;

example();</code></pre>
</div>
</div>
<div class="paragraph">
<p>This design choice allows POCA to optimize <code>let</code> and <code>const</code> variables for performance
through static analysis and register allocation, while maintaining the flexibility of
<code>var</code> for dynamic programming patterns that require runtime variable resolution.</p>
</div>
<div class="paragraph">
<p><strong>Comparison with JavaScript/ECMAScript:</strong></p>
</div>
<div class="paragraph">
<p>For developers familiar with JavaScript/ECMAScript, it&#8217;s important to note that POCA&#8217;s
scoping behavior differs significantly from JavaScript&#8217;s hoisting mechanism:</p>
</div>
<div class="paragraph">
<p>In <strong>JavaScript/ECMAScript</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>let</code> and <code>const</code></strong>: Have block scope and are subject to the <strong>Temporal Dead Zone (TDZ)</strong>.
They are hoisted but cannot be accessed before their declaration, resulting in a
<code>ReferenceError</code> if referenced earlier in the code.</p>
</li>
<li>
<p><strong><code>var</code></strong>: Has function scope (or global scope) and is <strong>hoisted</strong> to the top of its scope.
The declaration is hoisted but not the initialization, so accessing a <code>var</code> variable before
its declaration line returns <code>undefined</code> rather than an error.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>In <strong>POCA</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><code>let</code> and <code>const</code></strong>: Follow <strong>static scoping by declaration order</strong> - they must be declared
before use, with compile-time verification. This is a compile-time check, not a runtime TDZ.</p>
</li>
<li>
<p><strong><code>var</code></strong>: Uses <strong>true dynamic scoping</strong> with runtime hash table lookup, allowing access from
anywhere within the scope regardless of declaration order, unless they are shadowed by another
<code>let</code>/<code>const</code>/<code>var</code> definition.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The key difference: JavaScript uses hoisting (moving declarations to the top) with all three
keywords using lexical scoping, while POCA fundamentally distinguishes between compile-time
static resolution (<code>let</code>/<code>const</code>) and runtime dynamic resolution (<code>var</code>). This makes POCA&#8217;s
<code>var</code> more flexible for dynamic programming patterns, while <code>let</code>/<code>const</code> enable better
compile-time optimization.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_data_types">Data types</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_which_data_types">Which data types?</h3>
<div class="paragraph">
<p>POCA has the following data types on the language level:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Null</code>: Special null value</p>
</li>
<li>
<p><code>Number</code>: Double-precision floating point numbers (64 bit IEEE 754)</p>
</li>
<li>
<p><code>String</code>: Immutable sequences of characters, ASCII and UTF-8 supported together with code
point and code unit operations</p>
</li>
<li>
<p><code>Hash</code>: Hash tables with support for meta tables (similar to Lua), equivalent to JavaScript objects</p>
</li>
<li>
<p><code>Array</code>: Ordered collections of values</p>
</li>
<li>
<p><code>Ghost</code>: Special type for external types, objects, and resources, for example,
native primitives such as Locks, Threads, RegExps, etc.</p>
</li>
<li>
<p><code>Function</code>: First-class functions, closures, and lambdas, linked to <code>Code</code> or <code>NativeCode</code>
object values</p>
</li>
<li>
<p><code>Code</code>: Bytecode-compiled code objects, including JIT-compiled native code</p>
</li>
<li>
<p><code>NativeCode</code>: Native code objects, such as native functions wrapped for POCA</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>and some additional types on the internal engine level, such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>Reference</code>: Internal reference type for objects, so just ignore this type
when programming in POCA, as it&#8217;s not exposed on the language level.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_why_no_separate_boolean_type">Why No Separate Boolean Type?</h4>
<div class="paragraph">
<p>You might wonder why there&#8217;s no dedicated <code>Boolean</code> type. In POCA, boolean values are represented using the <code>Number</code> type, where <code>0</code> is considered <code>false</code> and any non-zero value is considered <code>true</code>. For convenience, POCA provides <code>false</code> and <code>true</code> as predefined constants (aliases for <code>0</code> and <code>1</code> respectively), allowing you to write idiomatic boolean logic while maintaining the simplicity of a unified numeric type.</p>
</div>
<div class="paragraph">
<p>While this may seem unusual, this approach simplifies the type system and allows for more flexible operations, similar to how some other scripting languages handle boolean logic. It also simplifies type coercion rules in expressions and the instruction set architecture.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_no_separate_integer_type">Why No Separate Integer Type?</h4>
<div class="paragraph">
<p>All numbers are represented as double-precision floating point values. This design choice simplifies the language and avoids complications arising from having multiple numeric types, while still allowing for integer-like operations when needed, such as bitwise operations and integer division, although these are limited to the 53-bit integer range due to the IEEE 754 representation of the mantissa in 64-bit double-precision floats.</p>
</div>
</div>
<div class="sect3">
<h4 id="_why_no_separate_undefined_type">Why No Separate Undefined Type?</h4>
<div class="paragraph">
<p>Instead of having both <code>null</code> and <code>undefined</code>, POCA uses the single special value <code>null</code> to represent both concepts. This unification simplifies the type system and reduces complexity when dealing with absent or uninitialized values.</p>
</div>
<div class="paragraph">
<p>By default, read accesses to undefined hash table keys, array indices, or out-of-bounds array accesses throw exceptions rather than returning <code>undefined</code>. This design choice enhances code reliability and helps catch errors early, as developers are immediately alerted to attempts to access non-existent properties or indices that might otherwise lead to silent failures.</p>
</div>
<div class="paragraph">
<p>However, POCA provides the optional chaining operator (<code>?.</code>) and nullish coalescing operator (<code>??</code>) for cases where you want to safely handle potentially missing values. These operators treat missing properties or out-of-bounds accesses as <code>null</code> without throwing exceptions, allowing for graceful fallback handling (see <a href="#nullish-coalescing-operator">[nullish-coalescing-operator]</a> for details).</p>
</div>
<div class="paragraph">
<p>This approach minimizes confusion by providing a single representation for "no value" scenarios and aligns with POCA&#8217;s design philosophy of keeping the language straightforward and easy to use.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes">Classes</h3>
<div class="paragraph">
<p>POCA supports class-based object-oriented programming (OOP) with the <code>class</code> keyword, which allows you to define classes, constructors, methods, and inheritance. These are just syntactic sugar over POCA&#8217;s
prototype-based OOP model with the <code>Hash</code> data type, making it easier to work with objects in a familiar way. See the other documentation sections for more details on classes and OOP in POCA.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_a_quick_tour">A quick tour</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_how_to_declare_variables">How to declare variables</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var x;
let y;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_how_to_use_variables">How to use variables</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">x = 5;
y = 6;
let z = x + y;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_values">Values</h3>
<div class="paragraph">
<p>The POCA syntax defines two types of values:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Fixed values</p>
</li>
<li>
<p>Variable values</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Fixed values are called Literals.</p>
</div>
<div class="paragraph">
<p>Variable values are called Variables.</p>
</div>
</div>
<div class="sect2">
<h3 id="_literals">Literals</h3>
<div class="paragraph">
<p>The two most important syntax rules for fixed values are:</p>
</div>
<div class="paragraph">
<p>Numbers are written with or without decimals:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">10.50

1001</code></pre>
</div>
</div>
<div class="paragraph">
<p>Strings are text, written within double or single quotes:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">"John Doe"

'John Doe'</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variables">Variables</h3>
<div class="paragraph">
<p>In a programming language, variables are used to store data values.</p>
</div>
<div class="paragraph">
<p>POCA uses the keywords var, let and const to declare variables.</p>
</div>
<div class="paragraph">
<p>An equal sign is used to assign values to variables.</p>
</div>
<div class="paragraph">
<p>In this example, x is defined as a variable. Then, x is assigned (given) the value 6:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let x;
x = 6;

// or

let x = 6;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_operators">Operators</h3>
<div class="paragraph">
<p>POCA uses arithmetic operators ( + - * / ) to compute values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">(5 + 6) * 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>POCA uses an assignment operator ( = ) to assign values to variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let x, y;
x = 5;
y = 6;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_expressions">Expressions</h3>
<div class="paragraph">
<p>An expression is a combination of values, variables, and operators, which computes to a value.</p>
</div>
<div class="paragraph">
<p>The computation is called an evaluation.</p>
</div>
<div class="paragraph">
<p>For example, 5 * 10 evaluates to 50:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">5 * 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>Expressions can also contain variable values:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">x * 10</code></pre>
</div>
</div>
<div class="paragraph">
<p>The values can be of various types, such as numbers and strings.</p>
</div>
<div class="paragraph">
<p>For example, <code>"John" ~ " " ~ "Doe"</code>, evaluates to <code>"John Doe"</code>, since <code>~</code> is using for string concatenation:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">"John" ~ " " ~ "Doe"</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_nullish_coalescing_operator">Nullish Coalescing Operator</h3>
<div class="paragraph">
<p>POCA provides the nullish coalescing operator <code>??</code> to provide default values when dealing with <code>null</code> or <code>undefined</code>.</p>
</div>
<div class="paragraph">
<p>The <code>??</code> operator returns its left operand if it&#8217;s not <code>null</code> or <code>undefined</code>, otherwise it returns the right operand:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let name = userName ?? "Guest";        // Use userName if defined, else "Guest"
let port = config.port ?? 8080;        // Use config.port if set, else 8080
let value = input ?? fallback ?? 0;   // Chain multiple defaults (left-to-right)</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_important_nullish_vs_falsy">Important: Nullish vs Falsy</h4>
<div class="paragraph">
<p>Unlike the logical OR operator (<code>||</code>), which treats all falsy values (<code>0</code>, <code>""</code>, <code>false</code>, <code>null</code>, <code>undefined</code>) as triggers for the default, <code>??</code> <strong>only</strong> triggers on <code>null</code> or <code>undefined</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let count = 0;
let x = count || 10;    // x = 10 (because 0 is falsy)
let y = count ?? 10;    // y = 0  (because 0 is not nullish)

let name = "";
let a = name || "Anonymous";   // a = "Anonymous" (because "" is falsy)
let b = name ?? "Anonymous";   // b = ""  (because "" is not nullish)</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_precedence_and_mixing_rules">Precedence and Mixing Rules</h4>
<div class="paragraph">
<p>The <code>??</code> operator has <strong>very low precedence</strong>. It&#8217;s lower than <code>||</code> and <code>&amp;&amp;</code>, but higher than the ternary <code>?:</code>, so it evaluates <strong>after</strong> most other operators. This means that in mixed expressions, <code>||</code> and <code>&amp;&amp;</code> bind their operands first, and the resulting value then becomes the operand for <code>??</code>.</p>
</div>
<div class="paragraph">
<p><strong>When mixing <code>??</code> with <code>&amp;&amp;</code> or <code>||</code>, the evaluation order may be surprising</strong> because those operators bind more tightly, as <code>??</code> has lower precedence:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// ⚠️ These parse in ways that may surprise you:
result = a || b ?? c;        // Parsed as: (a || b) ?? c
result = a ?? b &amp;&amp; c;        // Parsed as: a ?? (b &amp;&amp; c)

// ✅ Always use explicit parentheses to show intent clearly:
result = a || (b ?? c);      // OR first, then coalesce
result = (a || b) ?? c;      // Coalesce the OR result
result = a ?? (b &amp;&amp; c);      // Coalesce with AND result
result = (a ?? b) &amp;&amp; c;      // AND after coalescing</code></pre>
</div>
</div>
<div class="paragraph">
<p>Because the low precedence can lead to unexpected grouping, <strong>always add parentheses when mixing <code>??</code> with logical operators</strong>, even though it&#8217;s not a syntax error. This makes your intent explicit and prevents subtle logic errors.</p>
</div>
</div>
<div class="sect3">
<h4 id="_common_patterns">Common Patterns</h4>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// Providing default values
let timeout = options.timeout ?? 5000;

// Chaining fallbacks (evaluates left-to-right)
let port = args.port ?? env.PORT ?? config.port ?? 3000;

// With arithmetic - always use parentheses for clarity
let total = (price ?? 0) + (tax ?? 0);
let scaled = (value ?? 1) * multiplier;

// With conditionals
let message = isError ? errorMsg : (userMsg ?? "No message");

// Safe property access
let displayName = user?.profile?.name ?? "Anonymous";</code></pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_why_not_forbid_mixing_like_javascript">Why Not Forbid Mixing Like JavaScript?</h4>
<div class="paragraph">
<p>JavaScript/ECMAScript forbids mixing <code>??</code> with <code>&amp;&amp;</code> or <code>||</code> without parentheses as a syntax error. POCA takes a different approach: it allows mixing but with clear precedence rules where <code>??</code> has lower precedence than <code>&amp;&amp;</code> and <code>||</code>, and encourages developers to use parentheses for clarity. Parentheses are always recommended when combining these operators to avoid ambiguity, even when some people might find it tedious and/or too verbose.</p>
</div>
<div class="paragraph">
<p>The rationale is that POCA developers should understand operator precedence, just as they do for arithmetic operators like <code>+</code> and <code>*</code>. Forbidding certain combinations adds language complexity without solving the real issue. Instead, POCA relies on documentation and linter warnings to guide developers toward using parentheses for clarity.</p>
</div>
<div class="paragraph">
<p>This keeps the language simpler while still encouraging readable code through best practices rather than hard restrictions.</p>
</div>
</div>
<div class="sect3">
<h4 id="_best_practices">Best Practices</h4>
<div class="ulist">
<ul>
<li>
<p>Use <code>??</code> when you specifically want to handle <code>null</code>/<code>undefined</code> but preserve other falsy values like <code>0</code>, <code>""</code>, or <code>false</code></p>
</li>
<li>
<p>Use <code>||</code> when you want to default on any falsy value</p>
</li>
<li>
<p>Always add parentheses when combining <code>??</code> with other logical operators for readability</p>
</li>
<li>
<p>Prefer clear, explicit grouping in complex expressions over relying on precedence rules</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_keywords">Keywords</h3>
<div class="paragraph">
<p>POCA keywords are used to identify actions to be performed.</p>
</div>
<div class="paragraph">
<p>The <code>let</code> keyword is used to create variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let x = 5 + 6;
let y = x * 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>var</code> keyword is also used to create variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var x = 5 + 6;
var y = x * 10;</code></pre>
</div>
</div>
<div class="paragraph">
<p>However, the <code>const</code> keyword is also used to create constants:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">const x = 5 + 6;
const y = x * 10;</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_comments">Comments</h3>
<div class="paragraph">
<p>Not all POCA statements are "executed".</p>
</div>
<div class="paragraph">
<p>Code after double slashes <code>//</code> or between</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>/*</code></pre>
</div>
</div>
<div class="paragraph">
<p>and</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code>*/</code></pre>
</div>
</div>
<div class="paragraph">
<p>is treated as a comment.</p>
</div>
<div class="paragraph">
<p>Comments are ignored, and will not be executed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let x = 5;   // I will be executed

// x = 6;   I will NOT be executed</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_identifiers_names">Identifiers / Names</h3>
<div class="paragraph">
<p>Identifiers are POCA names.</p>
</div>
<div class="paragraph">
<p>Identifiers are used to name variables and keywords, and functions.</p>
</div>
<div class="paragraph">
<p>The rules for legal names are the same in most programming languages.</p>
</div>
<div class="paragraph">
<p>A POCA name must begin with:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A letter (A-Z or a-z)</p>
</li>
<li>
<p>A dollar sign ($)</p>
</li>
<li>
<p>Or an underscore (_)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Subsequent characters may be letters, digits, underscores, or dollar signs.</p>
</div>
<div class="paragraph">
<p>Numbers are not allowed as the first character in names.</p>
</div>
<div class="paragraph">
<p>This way POCA can easily distinguish identifiers from numbers.</p>
</div>
</div>
<div class="sect2">
<h3 id="_poca_is_case_sensitive">POCA is Case Sensitive</h3>
<div class="paragraph">
<p>All POCA identifiers are case sensitive.</p>
</div>
<div class="paragraph">
<p>The variables lastName and lastname, are two different variables:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let lastName = "Doe";
let lastname = "Peterson";</code></pre>
</div>
</div>
<div class="paragraph">
<p>POCA does not interpret LET or Let as the keyword let.</p>
</div>
</div>
<div class="sect2">
<h3 id="_poca_character_set">POCA Character Set</h3>
<div class="paragraph">
<p>POCA uses the Unicode character set together with the UTF8 internal encoding.</p>
</div>
<div class="paragraph">
<p>Unicode covers (almost) all the characters, punctuations, and symbols in the world.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_learning_by_examples">Learning by examples</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_definitions">Definitions</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">a = 3.14159;                    // a is then inside in the current environment hash table
var b = 0x10000;                // b is then inside in the current environment hash table
let c = 0b10101;                // c is then assigned to a VM-register or frame variable storage, depending on the scope
const f = "This is a constant";

var (g, h) = (0, 1);
(g, h) = (h, g);

function bla(){
  return [1, 2, 3]:
}

let (x, y, z) = bla();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scope_and_code_blocks">Scope and code blocks</h3>
<div class="paragraph">
<p>POCA distinguishes between object/hash literals and code blocks based on their content. Object literals are defined by key-value pairs separated by colons (<code>:</code>) and commas (<code>,</code>). Code blocks consist of expressions or statements without this pattern. The <code>scope</code> and 'code' keywords can be used to explicitly define a code block when ambiguity might arise, as everything in POCA is treated as an expression.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// Example object literal with multiple keys
{ name: "Alice", age: 30 }

// Example object literal with a single key-value pair
{ Name: "Alice" }

// Example shorthand object literal
{ name, age } // Assuming 'name' and 'age' are defined variables, it expands to { name: name, age: age }

// Example object literal with a single shorthand key
{ name } // Assuming 'name' is defined, it expands to { name: name }

// Example code block
{ name; } // This is treated as a code block, because of the semicolon, for distinguishing it from an shorthand object literal

// Example code block
{ print("Hello"); }

// Explicit code block using 'scope' where a new scope is created
scope {
  let x = 10;
  print(x);
}

// Example code block using 'code' where no new scope is created
code {
  let y = 20;
  print(y);
}

// Example of nested code blocks with explicit 'scope' and 'code' keywords
scope {
  let a = 1 + 2;
  code {
    let b = a + 2;
    print(b);
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Without the <code>scope</code> and <code>code</code> keyword, POCA relies on the presence of key-value pairs (identifiers followed by a colon and value) to identify object literals. If no such pattern is found within the curly braces, it&#8217;s treated as a code block. However, empty curly braces <code>{}</code> are always treated as an empty object literal, since inside code blocks, these are anyway effectively no-ops and will be garbage collected later.</p>
</div>
<div class="paragraph">
<p>This distinction allows for flexibility in defining both objects and code blocks, making POCA&#8217;s syntax versatile.</p>
</div>
</div>
<div class="sect2">
<h3 id="_arraysvectors">Arrays/Vectors</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let va = [1, 2, 3];
let vb = [4, 5, 6];
let vc = (va ~ vb) ~ [7, 8, 9];  // ~ is the concatenation operator for arrays, strings, etc.
let vd = vc[0 .. 4];             // range slice copy

va.push(21);
va.push(42);
va.push(1337);

for(let i = 0; i &lt; va.size(); i++){
  puts(va[i]);
}

foreach(let arrayElement in vd){
  puts(arrayElement);
}

while(!va.empty()){
  va.pop();
}

function Bla(){
  return [1, 2, 3];
}

let (a, b, c) = Bla();

puts(a, " ", b, " ", c);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hashsprototypingobjects">Hashs/Prototyping/Objects</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let aHash = {
              bla: "bla!",
              bluh: "bluh?"
            };

foreach(let hashElement; aHash){
  puts(hashElement);
}

function oa(){
  return {};
}

var x = {a: 12, y:() =&gt; puts(@a)};
let y = {prototype: x, b: 34};
let z = {prototype: y, c: 56};
const p = {b: 42, "c": 41};

puts(x.a);
puts(y.a);
puts(z.a);
puts();

y.a=13;

puts(x.a);
puts(y.a);
puts(z.a);
puts();

z.a=14;

puts(x.a);
puts(y.a);
puts(z.a);
puts();

x.y();
y.y();
z.y();

readLine();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_functionslambdas">Functions/Lambdas</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// Function parameters default to 'let'
function Test1(a, b){
  return (a + b) * 2;  // a and b are treated as 'let' by default
}

// Explicit 'let' (same as default)
function Test2(let a, let b){
  return (a + b) * 2;
}

// Explicit 'var' when needed for hash table storage
function Test3(var a, var b){
  return (a + b) * 2;  // a and b stored in local hash table
}

fastfunction Test4(let a, let b){
  return (a + b) * 2;
}

let u(x=(4)) -&gt; x * x;

puts(u());

y(x) -&gt; x * x;

puts(y(4));

let z=(x)=&gt;x + x;

puts(z(4));

let w=function(x)(x * x) - x;

puts(w(4));

let a = function(x){
 return (x * x) - x;
}

puts(a(4));

let function b(x){
  return (x * x) - x;
}

puts(b(4));

f(x) -&gt; x + 3;
function g(m, x) m(x) * m(x);
puts(g(f, 7));

function searchPrimes(let from, let to){
  let (dummy, primes, n, i, j, isPrime) = (0, 0, 0, 0, 0, 0);
  from = +from;
  to = +to;
  for(n = from; n&lt;= to; ++n){
    i = ((n % 2) === 0) ? 2 : 3;
    j = n ** 0.5;
    isPrime = 1;
    while(i &lt;= j){
      if((n % i) === 0){
        isPrime = 0;
        break;
      }
      i += 2;
    }
    primes += isPrime;
  }
  return primes;
}</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="_function_parameter_scoping">Function Parameter Scoping</h4>
<div class="paragraph">
<p>Function parameters default to <code>let</code> scope unless explicitly declared with <code>var</code>.
This provides better performance by storing parameters directly in the function&#8217;s
register set or frame storage for faster access, depending on the scoping, avoiding
the hash table lookup overhead of <code>var</code>.</p>
</div>
<div class="paragraph">
<p>When you need dynamic variable lookup or metaprogramming features, you can
explicitly declare parameters as <code>var</code> to store them in the local hash table.</p>
</div>
</div>
<div class="sect3">
<h4 id="_fast_functions">Fast Functions</h4>
<div class="paragraph">
<p>POCA provides a <code>fastfunction</code> keyword for performance-critical functions. Fast
functions are optimized by eliminating the overhead of the local variable hash
table that regular functions use for <code>var</code>-declared variables.</p>
</div>
<div class="paragraph">
<p><strong>Key Differences:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Regular <code>function</code></strong>: Variables declared with <code>var</code> are stored in a hash table
(object/dictionary), which provides flexibility but has lookup overhead.</p>
</li>
<li>
<p><strong>Fast <code>fastfunction</code></strong>: Does not create the hash table for <code>var</code> variables.
All variables must be declared with <code>let</code> or <code>const</code>, which are stored directly
in the function&#8217;s register set or frame storage for faster access, depending on
the scoping.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>When to use <code>fastfunction</code>:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Performance-critical code (hot loops, frequently called functions)</p>
</li>
<li>
<p>Functions that don&#8217;t need `var&#8217;s dynamic properties</p>
</li>
<li>
<p>Functions where all local variables can be declared with <code>let</code> or <code>const</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Restrictions:</strong></p>
</div>
<div class="ulist">
<ul>
<li>
<p>Cannot use <code>var</code> keyword inside a <code>fastfunction</code></p>
</li>
<li>
<p>All local variables must be declared with <code>let</code> or <code>const</code></p>
</li>
<li>
<p>Slightly less flexible than regular functions, but significantly faster</p>
</li>
</ul>
</div>
<div class="paragraph">
<p><strong>Example:</strong></p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">// Regular function - uses hash table for var variables
function regularSum(a, b) {
  var temp = a + b;  // stored in hash table
  return temp * 2;
}

// Fast function - all variables in registers/frame storage
fastfunction fastSum(let a, let b) {
  let temp = a + b;  // stored directly in registers/frame storage
  return temp * 2;
}

// Fast function with const
fastfunction computeArea(let width, let height) {
  const pi = 3.14159;
  let radius = width / 2;
  return pi * radius * radius;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For most code, regular <code>function</code> is fine. Use <code>fastfunction</code> when you&#8217;ve
identified performance bottlenecks through profiling and the function doesn&#8217;t
require <code>var</code> semantics.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_threads">Threads</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var terminated = 0;

function thread1function(){
  while(!terminated){
    puts("Thread 1");
  }
}

var thread1 = new Thread(thread1function);

var thread2 = new Thread(function(){
  while(!terminated){
    puts("Thread 2");
  }
});

thread1.start();
readLine();

thread2.start();
readLine();

terminated = 1;

thread1.wait();
thread2.wait();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_coroutines">Coroutines</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">function testcoroutinefunction(i){
  while(1){
    Coroutine.yield(i += Coroutine.get());
  }
}

var testcoroutine = new Coroutine(testcoroutinefunction, 1000);
print("Go!\r\n");
print(testcoroutine.resume(100), "\r\n");
print(testcoroutine.resume(10), "\r\n");
print(testcoroutine.resume(1)," \r\n");
readLine();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_classes_2">Classes</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var a = 12, b = 4;

class Test extends BaseClass {

  var a = 0;

  constructor(let v){
    this.a = v + 1;
  }

  function init(let v){
    this.a = v + 1;
  }

  function b(){
     puts(this.a);
  }

}

class TestB extends Test {

  var x = 0;

  constructor(let v){
    super(v * 2);
    this.x = v + 1;
  }

  function b(){
     super();    // calls previous Test.B
     super.b();  // also calls previous Test.B
     super.c();  // also previous Test.c
     this.a--;
     super.b();  // also calls previous Test.B
     puts(this.x);
  }

}

function Test.c(){
  puts(if(this.a === 247) "yeah" else "ups");
}

function Test::d(){
  puts((this.a === 247) ? "allright" : "fail!");
}

Test.e = function(){
  puts((this.a === 247) ? ":-)" : ":-(");
}

let bla = new Test(246);

puts(bla.a, " ", a, " ", b);

bla.b();
bla.c();
bla.d();
bla.e();

puts();

puts("Keys of object bla instance of class ",bla.className,":\n", scope{
  let s = "";
  forkey(key;bla){
    s ~= key ~ " of type " ~ typeof(bla[key]) ~ "\n";
  }
  s
});

let blup = new TestB(123);

puts(blup.a , " ", blup.x, " " , (blup instanceof Test) ? "true" : "false");
blup.b();

puts(Test.className);
puts(bla.className);
puts(TestB.className);
puts(blup.className);

var piep = new blup.classType(42);

puts(piep.a);

readLine();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_modulesnamespaces">Modules/Namespaces</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">module TestModule {

  class TestClass {

    var a = 0;

    constructor(let v){
      this.a = v;
    }

    function b(){
      puts(this.a);
    }

  }

  function TestClass::c(){
    puts(this.a * 2);
  }

}

module OtherTestModule {

  class TestClass {

    class TestClassInsideTestClass {

      module TestModuleInsideTestClassInsideTestClass {
      }

    }

    var a = 0;

    constructor(var v){
      this.a = v + v;
    }

    function b(){
      puts(this.a);
    }

  }

  function TestClass.c(){
    puts(this.a * 2);
  }

}

var TestClassInstanceFromTestModule = new TestModule.TestClass(2);
TestClassInstanceFromTestModule.b();
TestClassInstanceFromTestModule.c();

puts();

var TestClassInstanceFromOtherTestModule = new OtherTestModule.TestClass(2);
TestClassInstanceFromOtherTestModule.b();
TestClassInstanceFromOtherTestModule.c();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hash_eventsoperator_overloading">Hash events/Operator overloading</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var Vector = {
  create: function(let vx=0, let vy=0, let vz=0){
    return setHashEvents({
                           prototype: this,
                           x: vx,
                           y: vy,
                           z: vz
                         }, this);
  },
  __add: fastfunction(let a, let b){
    // Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)
    if((a instanceof Vector) &amp;&amp; (b instanceof Vector)){
      return new Vector(a.x + b.x, a.y + b.y, a.z + b.z);
    }else{
      throw "No vector?";
    }
  },
  __sub: fastfunction(let a, let b){
    // Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)
    if((a instanceof Vector) &amp;&amp; (b instanceof Vector)){
      return new Vector(a.x - b.x, a.y - b.y, a.z - b.z);
    }else{
      throw "No vector?";
    }
  },
  __mul:fastfunction(let a, let b){
    // Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)
    if((a instanceof Vector) &amp;&amp; (b instanceof Vector)){
      return new Vector(a.x * b.x, a.y * b.y, a.z * b.z);
    }else{
      throw "No vector?";
    }
  },
  __div: fastfunction(let a, let b){
    // Important hint: "this" can be null here (even in non-fastfunction functions), so doesn't use it here! :-)
    if((a instanceof Vector) &amp;&amp; (b instanceof Vector)){
      return new Vector(a.x / b.x, a.y / b.y, a.z / b.z);
    }else{
      throw "No vector?";
    }
  }
};

var va = new Vector(1, 2, 3);
var vb = new Vector(10, 20, 30);

var vc = va + vb;
puts(vc.x, " ", vc.y, " ", vc.z);

vc -= vb;
puts(vc.x, " ", vc.y, " ", vc.z);

vc *= vb;
puts(vc.x, " ", vc.y, " ", vc.z);

vc /= (va*vb);
puts(vc.x, " ", vc.y, " ", vc.z);

readLine();</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_regular_expressions">Regular expressions</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">var expr = "", lineRegExp = /^(.*)\\s*$/, match = [], i = 0, currentScope = {};
while(1){
  print((expr === "") ? "&gt; " : "\\ ");
  if(match = lineRegExp.match(line = readLine()))  {
    expr ~= match[0][1] ~ "\n";
    continue;
  }
  if((expr ~= line) === ""){
    break;
  }
  try{
    print("&lt; " ~ eval(expr, "&lt;eval&gt;", [], null, currentScope) ~ "\n");
  }catch(err){
    for(i = err.size() - 1; i &gt;= 0; i--){
      print(err[i] ~ " ");
    }
    print("\n");
  }
  expr = "";
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_exception_handling">Exception handling</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">try{
  print("Hello ");
}catch(c){
  print("dear ");
}finally{
  print("World!\n");
}

try{
  print("Hello ");
  throw 123;
}catch(c){
  print("dear ");
}finally{
  print("World!\n");
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_when">When</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let aValue = 5;
when(aValue){
  case(5 .. 10, 15 .. 17){
    puts("Hey! ", aValue);
    aValue++;
    retry;
  }
  case(18){
    puts("Hi! ", aValue);
    fallthrough;
  }
  case(19){
    puts("Hallo!");
  }
  else{
    puts("Ups!");
  }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_switch">Switch</h3>
<div class="listingblock">
<div class="content">
<pre class="highlight"><code class="language-javascript" data-lang="javascript">let aValue = 5;
switch(aValue){
  case 1:
  case 5:
  case 7:
  case 10:
    puts("Hey! ", aValue);
    break;
  case 18:
    puts("Hi! ", aValue);
  case 19:
    puts("Hallo!");
    break;
  default:
    puts("Ups!");
    break;
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_and_more">And more!</h3>
<div class="paragraph">
<p>And much more!</p>
</div>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2025-12-04 21:37:46 +0100
</div>
</div>
</body>
</html>